searchData={"items":[{"type":"module","title":"GameServer.Hooks.PluginBuilder","doc":"Builds an OTP plugin bundle from plugin source code on disk.\n\nThis is intended for admin-only workflows in development/self-hosted setups.\nIt runs `mix` commands on the server host/container.","ref":"GameServer.Hooks.PluginBuilder.html"},{"type":"type","title":"GameServer.Hooks.PluginBuilder.build_result/0","doc":"","ref":"GameServer.Hooks.PluginBuilder.html#t:build_result/0"},{"type":"type","title":"GameServer.Hooks.PluginBuilder.step_result/0","doc":"","ref":"GameServer.Hooks.PluginBuilder.html#t:step_result/0"},{"type":"function","title":"GameServer.Hooks.PluginBuilder.build/1","doc":"","ref":"GameServer.Hooks.PluginBuilder.html#build/1"},{"type":"function","title":"GameServer.Hooks.PluginBuilder.list_buildable_plugins/0","doc":"","ref":"GameServer.Hooks.PluginBuilder.html#list_buildable_plugins/0"},{"type":"function","title":"GameServer.Hooks.PluginBuilder.sources_dir/0","doc":"","ref":"GameServer.Hooks.PluginBuilder.html#sources_dir/0"},{"type":"module","title":"GameServer.Hooks.PluginManager","doc":"Loads and manages hook plugins shipped as OTP applications under `modules/plugins/*`.\n\nEach plugin is expected to be a directory named after the OTP app name (e.g. `polyglot_hook`)\ncontaining:\n\n    modules/plugins/polyglot_hook/\n      ebin/polyglot_hook.app\n      ebin/Elixir.GameServer.Modules.PolyglotHook.beam\n      deps/*/ebin/*.beam\n\nThe plugin's `.app` env must include the key `:hooks_module`, whose value is either a\ncharlist or string module name like `'Elixir.GameServer.Modules.PolyglotHook'`.\n\nThis manager is intentionally dependency-free: it only adds `ebin` directories to the code\npath and uses `Application.load/1` + `Application.ensure_all_started/1`.","ref":"GameServer.Hooks.PluginManager.html"},{"type":"type","title":"GameServer.Hooks.PluginManager.plugin_app/0","doc":"","ref":"GameServer.Hooks.PluginManager.html#t:plugin_app/0"},{"type":"type","title":"GameServer.Hooks.PluginManager.plugin_name/0","doc":"","ref":"GameServer.Hooks.PluginManager.html#t:plugin_name/0"},{"type":"function","title":"GameServer.Hooks.PluginManager.call_rpc/4","doc":"","ref":"GameServer.Hooks.PluginManager.html#call_rpc/4"},{"type":"function","title":"GameServer.Hooks.PluginManager.child_spec/1","doc":"Returns a specification to start this module under a supervisor.\n\nSee `Supervisor`.","ref":"GameServer.Hooks.PluginManager.html#child_spec/1"},{"type":"function","title":"GameServer.Hooks.PluginManager.hook_modules/0","doc":"","ref":"GameServer.Hooks.PluginManager.html#hook_modules/0"},{"type":"function","title":"GameServer.Hooks.PluginManager.list/0","doc":"","ref":"GameServer.Hooks.PluginManager.html#list/0"},{"type":"function","title":"GameServer.Hooks.PluginManager.lookup/1","doc":"","ref":"GameServer.Hooks.PluginManager.html#lookup/1"},{"type":"function","title":"GameServer.Hooks.PluginManager.plugins_dir/0","doc":"","ref":"GameServer.Hooks.PluginManager.html#plugins_dir/0"},{"type":"function","title":"GameServer.Hooks.PluginManager.reload/0","doc":"","ref":"GameServer.Hooks.PluginManager.html#reload/0"},{"type":"function","title":"GameServer.Hooks.PluginManager.reload_and_after_startup/0","doc":"","ref":"GameServer.Hooks.PluginManager.html#reload_and_after_startup/0"},{"type":"function","title":"GameServer.Hooks.PluginManager.start_link/1","doc":"","ref":"GameServer.Hooks.PluginManager.html#start_link/1"},{"type":"module","title":"GameServer.Schedule","doc":"Dynamic cron-like job scheduling for hooks.\n\nUse this module in your `after_startup/0` hook to register scheduled jobs\nthat will call your hook functions at specified intervals.\n\nThis module is safe for distributed deployments - only one instance will\nexecute each job per period using database locks.\n\nScheduled callbacks are automatically protected from user RPC calls.","ref":"GameServer.Schedule.html"},{"type":"module","title":"Examples - GameServer.Schedule","doc":"def after_startup do\n      # Simple intervals\n      Schedule.every_minutes(5, :on_every_5m)\n      Schedule.hourly(:on_hourly)\n      Schedule.daily(:on_daily)\n\n      # With options\n      Schedule.daily(:on_morning_report, hour: 9)\n      Schedule.weekly(:on_monday, day: :monday, hour: 10)\n\n      # Full cron syntax\n      Schedule.cron(:my_job, \"0 */6 * * *\", :on_every_6h)\n\n      :ok\n    end\n\n    # Callback receives context map (public function, but protected from RPC)\n    def on_hourly(context) do\n      IO.puts(\"Triggered at #{context.triggered_at}\")\n      :ok\n    end","ref":"GameServer.Schedule.html#module-examples"},{"type":"module","title":"Context - GameServer.Schedule","doc":"All callbacks receive a context map:\n\n    %{\n      triggered_at: ~U[2025-12-03 14:00:00Z],\n      job_name: :on_hourly,\n      schedule: \"0 * * * *\"\n    }","ref":"GameServer.Schedule.html#module-context"},{"type":"module","title":"Distributed Safety - GameServer.Schedule","doc":"When running multiple instances, only one will execute each job per period.\nThis is achieved via database locks in the `schedule_locks` table.\nOld locks are automatically cleaned up after 7 days.","ref":"GameServer.Schedule.html#module-distributed-safety"},{"type":"function","title":"GameServer.Schedule.cancel/1","doc":"Cancel a scheduled job.","ref":"GameServer.Schedule.html#cancel/1"},{"type":"function","title":"Examples - GameServer.Schedule.cancel/1","doc":"Schedule.cancel(:my_job)","ref":"GameServer.Schedule.html#cancel/1-examples"},{"type":"function","title":"GameServer.Schedule.cleanup_old_locks/1","doc":"Clean up old schedule locks older than the specified number of days.\n\nThis is called automatically during job execution, but can also be\ncalled manually if needed. Default is 7 days.","ref":"GameServer.Schedule.html#cleanup_old_locks/1"},{"type":"function","title":"Examples - GameServer.Schedule.cleanup_old_locks/1","doc":"Schedule.cleanup_old_locks()\n    Schedule.cleanup_old_locks(days: 30)","ref":"GameServer.Schedule.html#cleanup_old_locks/1-examples"},{"type":"function","title":"GameServer.Schedule.cron/3","doc":"Register a job with full cron syntax.","ref":"GameServer.Schedule.html#cron/3"},{"type":"function","title":"Examples - GameServer.Schedule.cron/3","doc":"Schedule.cron(:my_job, \"*/15 * * * *\", :on_every_15m)\n    Schedule.cron(:weekdays, \"0 9 * * 1-5\", :on_weekday_morning)","ref":"GameServer.Schedule.html#cron/3-examples"},{"type":"function","title":"GameServer.Schedule.daily/2","doc":"Run a job every day.","ref":"GameServer.Schedule.html#daily/2"},{"type":"function","title":"Options - GameServer.Schedule.daily/2","doc":"* `:hour` - hour of the day (0-23), default: 0\n  * `:minute` - minute of the hour (0-59), default: 0","ref":"GameServer.Schedule.html#daily/2-options"},{"type":"function","title":"Examples - GameServer.Schedule.daily/2","doc":"Schedule.daily(:on_midnight)\n    Schedule.daily(:on_morning, hour: 9)\n    Schedule.daily(:on_evening, hour: 18, minute: 30)","ref":"GameServer.Schedule.html#daily/2-examples"},{"type":"function","title":"GameServer.Schedule.every_minutes/2","doc":"Run a job every N minutes.","ref":"GameServer.Schedule.html#every_minutes/2"},{"type":"function","title":"Examples - GameServer.Schedule.every_minutes/2","doc":"Schedule.every_minutes(5, :on_5m)\n    Schedule.every_minutes(15, :on_15m)","ref":"GameServer.Schedule.html#every_minutes/2-examples"},{"type":"function","title":"GameServer.Schedule.hourly/2","doc":"Run a job every hour.","ref":"GameServer.Schedule.html#hourly/2"},{"type":"function","title":"Options - GameServer.Schedule.hourly/2","doc":"* `:minute` - minute of the hour (0-59), default: 0","ref":"GameServer.Schedule.html#hourly/2-options"},{"type":"function","title":"Examples - GameServer.Schedule.hourly/2","doc":"Schedule.hourly(:on_hourly)\n    Schedule.hourly(:on_half_hour, minute: 30)","ref":"GameServer.Schedule.html#hourly/2-examples"},{"type":"function","title":"GameServer.Schedule.list/0","doc":"List all scheduled jobs.\n\nReturns a list of job info maps.","ref":"GameServer.Schedule.html#list/0"},{"type":"function","title":"GameServer.Schedule.registered_callbacks/0","doc":"Returns the set of callback function names registered for scheduled jobs.\n\nThese are protected from user RPC calls via `Hooks.call/3`.","ref":"GameServer.Schedule.html#registered_callbacks/0"},{"type":"function","title":"GameServer.Schedule.weekly/2","doc":"Run a job every week.","ref":"GameServer.Schedule.html#weekly/2"},{"type":"function","title":"Options - GameServer.Schedule.weekly/2","doc":"* `:day` - day of week (`:sunday`, `:monday`, etc.), default: `:sunday`\n  * `:hour` - hour of the day (0-23), default: 0\n  * `:minute` - minute of the hour (0-59), default: 0","ref":"GameServer.Schedule.html#weekly/2-options"},{"type":"function","title":"Examples - GameServer.Schedule.weekly/2","doc":"Schedule.weekly(:on_sunday)\n    Schedule.weekly(:on_monday_morning, day: :monday, hour: 9)","ref":"GameServer.Schedule.html#weekly/2-examples"},{"type":"module","title":"GameServer.Schedule.Lock","doc":"Schema for schedule job locks.\n\nUsed to ensure only one instance executes a scheduled job\nin a distributed environment.","ref":"GameServer.Schedule.Lock.html"},{"type":"module","title":"GameServer.Schedule.Scheduler","doc":"Defines a quantum Scheduler.\n\nWhen used, the quantum scheduler expects the `:otp_app` as option.\nThe `:otp_app` should point to an OTP application that has\nthe quantum runner configuration. For example, the quantum scheduler:\n\n    defmodule GameServer.Schedule.Scheduler do\n      use Quantum, otp_app: :game_server\n    end\n\nCould be configured with:\n\n    config :game_server, GameServer.Schedule.Scheduler,\n      jobs: [\n        {\"@daily\", {Backup, :backup, []}},\n      ]","ref":"GameServer.Schedule.Scheduler.html"},{"type":"module","title":"Configuration: - GameServer.Schedule.Scheduler","doc":"* `:clock_broadcaster_name` - GenServer name of clock broadcaster \\\n    *(unstable, may break without major release until declared stable)*\n\n  * `:execution_broadcaster_name` - GenServer name of execution broadcaster \\\n    *(unstable, may break without major release until declared stable)*\n\n  * `:executor_supervisor_name` - GenServer name of execution supervisor \\\n    *(unstable, may break without major release until declared stable)*\n\n  * `:debug_logging` - Turn on debug logging\n\n  * `:jobs` - list of cron jobs to execute\n\n  * `:job_broadcaster_name` - GenServer name of job broadcaster \\\n    *(unstable, may break without major release until declared stable)*\n\n  * `:name` - GenServer name of scheduler \\\n    *(unstable, may break without major release until declared stable)*\n\n  * `:node_selector_broadcaster_name` - GenServer name of node selector broadcaster \\\n    *(unstable, may break without major release until declared stable)*\n\n  * `:overlap` - Default overlap of new Job\n\n  * `:otp_app` - Application where scheduler runs\n\n  * `:run_strategy` - Default Run Strategy of new Job\n\n  * `:schedule` - Default schedule of new Job\n\n  * `:storage` - Storage to use for persistence\n\n  * `:storage_name` - GenServer name of storage \\\n    *(unstable, may break without major release until declared stable)*\n\n  * `:supervisor_module` - Module to supervise scheduler \\\n    Can be overwritten to supervise processes differently (for example for clustering) \\\n    *(unstable, may break without major release until declared stable)*\n\n  * `:task_registry_name` - GenServer name of task registry \\\n    *(unstable, may break without major release until declared stable)*\n\n  * `:task_supervisor_name` - GenServer name of task supervisor \\\n    *(unstable, may break without major release until declared stable)*\n\n  * `:timeout` - Sometimes, you may come across GenServer timeout errors\n    esp. when you have too many jobs or high load. The default `GenServer.call/3`\n    timeout is `5_000`.\n\n  * `:timezone` - Default timezone of new Job","ref":"GameServer.Schedule.Scheduler.html#module-configuration"},{"type":"module","title":"Telemetry - GameServer.Schedule.Scheduler","doc":"* `[:quantum, :job, :add]`\n  * Description: dispatched when a job is added\n  * Measurements: `%{}`\n  * Metadata: `%{job: Quantum.Job.t(), scheduler: atom()}`\n\n* `[:quantum, :job, :update]`\n  * Description: dispatched when a job is updated\n  * Measurements: `%{}`\n  * Metadata: `%{job: Quantum.Job.t(), scheduler: atom()}`\n\n* `[:quantum, :job, :delete]`\n  * Description: dispatched when a job is deleted\n  * Measurements: `%{}`\n  * Metadata: `%{job: Quantum.Job.t(), scheduler: atom()}`\n\n* `[:quantum, :job, :start]`\n  * Description: dispatched on job execution start\n  * Measurements: `%{system_time: integer()}`\n  * Metadata: `%{telemetry_span_context: term(), job: Quantum.Job.t(), node: Node.t(), scheduler: atom()}`\n\n* `[:quantum, :job, :stop]`\n  * Description: dispatched on job execution end\n  * Measurements: `%{duration: integer()}`\n  * Metadata: `%{telemetry_span_context: term(), job: Quantum.Job.t(), node: Node.t(), scheduler: atom(), result: term()}`\n\n* `[:quantum, :job, :exception]`\n  * Description: dispatched on job execution fail\n  * Measurements: `%{duration: integer()}`\n  * Metadata: `%{telemetry_span_context: term(), job: Quantum.Job.t(), node: Node.t(), scheduler: atom(), kind: :throw | :error | :exit, reason: term(), stacktrace: list()}`","ref":"GameServer.Schedule.Scheduler.html#module-telemetry"},{"type":"module","title":"Examples - GameServer.Schedule.Scheduler","doc":"iex(1)> :telemetry_registry.discover_all(:quantum)\n    :ok\n    iex(2)> :telemetry_registry.spannable_events()\n    [{[:quantum, :job], [:start, :stop, :exception]}]\n    iex(3)> :telemetry_registry.list_events\n    [\n      {[:quantum, :job, :add], Quantum,\n       %{\n         description: \"dispatched when a job is added\",\n         measurements: \"%{}\",\n         metadata: \"%{job: Quantum.Job.t(), scheduler: atom()}\"\n       }},\n      {[:quantum, :job, :delete], Quantum,\n       %{\n         description: \"dispatched when a job is deleted\",\n         measurements: \"%{}\",\n         metadata: \"%{job: Quantum.Job.t(), scheduler: atom()}\"\n       }},\n      {[:quantum, :job, :exception], Quantum,\n       %{\n         description: \"dispatched on job execution fail\",\n         measurements: \"%{duration: integer()}\",\n         metadata: \"%{telemetry_span_context: term(), job: Quantum.Job.t(), node: Node.t(), scheduler: atom(), kind: :throw | :error | :exit, reason: term(), stacktrace: list()}\"\n       }},\n      {[:quantum, :job, :start], Quantum,\n       %{\n         description: \"dispatched on job execution start\",\n         measurements: \"%{system_time: integer()}\",\n         metadata: \"%{telemetry_span_context: term(), job: Quantum.Job.t(), node: Node.t(), scheduler: atom()}\"\n       }},\n      {[:quantum, :job, :stop], Quantum,\n       %{\n         description: \"dispatched on job execution end\",\n         measurements: \"%{duration: integer()}\",\n         metadata: \"%{telemetry_span_context: term(), job: Quantum.Job.t(), node: Node.t(), scheduler: atom(), result: term()}\"\n       }},\n      {[:quantum, :job, :update], Quantum,\n       %{\n         description: \"dispatched when a job is updated\",\n         measurements: \"%{}\",\n         metadata: \"%{job: Quantum.Job.t(), scheduler: atom()}\"\n       }}\n    ]","ref":"GameServer.Schedule.Scheduler.html#module-examples"},{"type":"function","title":"GameServer.Schedule.Scheduler.child_spec/1","doc":"","ref":"GameServer.Schedule.Scheduler.html#child_spec/1"},{"type":"module","title":"GameServer.Types","doc":"Shared types used across GameServer contexts.\n\nThese types provide self-documenting function signatures for common\npatterns like pagination options and entity attributes.","ref":"GameServer.Types.html"},{"type":"type","title":"GameServer.Types.leaderboard_create_attrs/0","doc":"Attributes for creating a new leaderboard.","ref":"GameServer.Types.html#t:leaderboard_create_attrs/0"},{"type":"type","title":"Fields - GameServer.Types.leaderboard_create_attrs/0","doc":"* `:slug` - Human-readable identifier (required, 1-100 chars, lowercase alphanumeric with underscores)\n  * `:title` - Display title (required, 1-255 chars)\n  * `:description` - Optional description\n  * `:sort_order` - `:desc` (higher is better) or `:asc` (lower is better). Default: `:desc`\n  * `:operator` - How scores are combined:\n    * `:set` - Always replace with new score\n    * `:best` - Only update if new score is better (default)\n    * `:incr` - Add to existing score\n    * `:decr` - Subtract from existing score\n  * `:starts_at` - Optional start time (UTC)\n  * `:ends_at` - Optional end time (UTC)\n  * `:metadata` - Arbitrary key-value data","ref":"GameServer.Types.html#t:leaderboard_create_attrs/0-fields"},{"type":"type","title":"Example - GameServer.Types.leaderboard_create_attrs/0","doc":"create_leaderboard(%{\n      slug: \"weekly_kills\",\n      title: \"Weekly Kills\",\n      sort_order: :desc,\n      operator: :incr,\n      ends_at: ~U[2024-12-08 00:00:00Z]\n    })\n\nNote: The same slug can be used for multiple leaderboards (seasons).\nWhen querying by slug, the active leaderboard is returned.","ref":"GameServer.Types.html#t:leaderboard_create_attrs/0-example"},{"type":"type","title":"GameServer.Types.leaderboard_update_attrs/0","doc":"Attributes for updating an existing leaderboard.\n\nNote: `slug`, `sort_order`, and `operator` cannot be changed after creation.","ref":"GameServer.Types.html#t:leaderboard_update_attrs/0"},{"type":"type","title":"Fields - GameServer.Types.leaderboard_update_attrs/0","doc":"* `:title` - Display title (1-255 chars)\n  * `:description` - Description text\n  * `:starts_at` - Start time (UTC)\n  * `:ends_at` - End time (UTC)\n  * `:metadata` - Arbitrary key-value data","ref":"GameServer.Types.html#t:leaderboard_update_attrs/0-fields"},{"type":"type","title":"Example - GameServer.Types.leaderboard_update_attrs/0","doc":"update_leaderboard(leaderboard, %{\n      title: \"Updated Title\",\n      ends_at: ~U[2024-12-15 00:00:00Z]\n    })","ref":"GameServer.Types.html#t:leaderboard_update_attrs/0-example"},{"type":"type","title":"GameServer.Types.lobby_create_attrs/0","doc":"Attributes for creating a new lobby.","ref":"GameServer.Types.html#t:lobby_create_attrs/0"},{"type":"type","title":"Fields - GameServer.Types.lobby_create_attrs/0","doc":"* `:name` - Unique identifier/slug (required)\n  * `:title` - Display title (required)\n  * `:max_users` - Maximum number of users allowed (default: 10)\n  * `:is_hidden` - Whether lobby is hidden from public lists (default: false)\n  * `:is_locked` - Whether lobby is locked from new joins (default: false)\n  * `:password` - Optional password for protected lobbies\n  * `:hostless` - Whether lobby can exist without a host (default: false)\n  * `:metadata` - Arbitrary key-value data","ref":"GameServer.Types.html#t:lobby_create_attrs/0-fields"},{"type":"type","title":"Example - GameServer.Types.lobby_create_attrs/0","doc":"create_lobby(user, %{\n      name: \"my-game-room\",\n      title: \"My Game Room\",\n      max_users: 4,\n      password: \"secret\"\n    })","ref":"GameServer.Types.html#t:lobby_create_attrs/0-example"},{"type":"type","title":"GameServer.Types.lobby_list_opts/0","doc":"Lobby listing options for filtering and pagination.","ref":"GameServer.Types.html#t:lobby_list_opts/0"},{"type":"type","title":"Options - GameServer.Types.lobby_list_opts/0","doc":"* `:page` - The page number (1-indexed). Defaults to `nil` (returns all).\n  * `:page_size` - Number of items per page. Defaults to `25`.\n  * `:include_hidden` - Include hidden lobbies in results. Defaults to `false`.","ref":"GameServer.Types.html#t:lobby_list_opts/0-options"},{"type":"type","title":"Example - GameServer.Types.lobby_list_opts/0","doc":"# List all visible lobbies\n    list_lobbies([])\n\n    # List page 1 including hidden lobbies\n    list_lobbies(page: 1, include_hidden: true)","ref":"GameServer.Types.html#t:lobby_list_opts/0-example"},{"type":"type","title":"GameServer.Types.lobby_update_attrs/0","doc":"Attributes for updating an existing lobby.","ref":"GameServer.Types.html#t:lobby_update_attrs/0"},{"type":"type","title":"Fields - GameServer.Types.lobby_update_attrs/0","doc":"* `:title` - Display title\n  * `:max_users` - Maximum number of users allowed\n  * `:is_hidden` - Whether lobby is hidden from public lists\n  * `:is_locked` - Whether lobby is locked from new joins\n  * `:password` - Password for protected lobbies (set to nil to remove)\n  * `:metadata` - Arbitrary key-value data","ref":"GameServer.Types.html#t:lobby_update_attrs/0-fields"},{"type":"type","title":"Example - GameServer.Types.lobby_update_attrs/0","doc":"update_lobby(lobby, user, %{\n      title: \"New Title\",\n      is_locked: true\n    })","ref":"GameServer.Types.html#t:lobby_update_attrs/0-example"},{"type":"type","title":"GameServer.Types.pagination_opts/0","doc":"Pagination options for list queries.","ref":"GameServer.Types.html#t:pagination_opts/0"},{"type":"type","title":"Options - GameServer.Types.pagination_opts/0","doc":"* `:page` - The page number (1-indexed). Defaults to `1`.\n  * `:page_size` - Number of items per page. Defaults to `25`.","ref":"GameServer.Types.html#t:pagination_opts/0-options"},{"type":"type","title":"Example - GameServer.Types.pagination_opts/0","doc":"# Get the first page with default size\n    list_users([])\n\n    # Get page 2 with 50 items per page\n    list_users(page: 2, page_size: 50)","ref":"GameServer.Types.html#t:pagination_opts/0-example"},{"type":"type","title":"GameServer.Types.user_registration_attrs/0","doc":"Attributes for registering a new user.","ref":"GameServer.Types.html#t:user_registration_attrs/0"},{"type":"type","title":"Fields - GameServer.Types.user_registration_attrs/0","doc":"* `:email` - User's email address (required for email registration)\n  * `:password` - User's password (required for email registration, min 8 chars)\n  * `:display_name` - Optional display name\n  * `:device_id` - Optional device ID for anonymous auth","ref":"GameServer.Types.html#t:user_registration_attrs/0-fields"},{"type":"type","title":"Example - GameServer.Types.user_registration_attrs/0","doc":"register_user(%{\n      email: \"user@example.com\",\n      password: \"secret123\",\n      display_name: \"Player One\"\n    })","ref":"GameServer.Types.html#t:user_registration_attrs/0-example"},{"type":"type","title":"GameServer.Types.user_update_attrs/0","doc":"Attributes for updating an existing user.","ref":"GameServer.Types.html#t:user_update_attrs/0"},{"type":"type","title":"Fields - GameServer.Types.user_update_attrs/0","doc":"* `:display_name` - User's display name\n  * `:metadata` - Arbitrary key-value data stored with the user\n  * `:is_admin` - Whether the user has admin privileges","ref":"GameServer.Types.html#t:user_update_attrs/0-fields"},{"type":"type","title":"Example - GameServer.Types.user_update_attrs/0","doc":"update_user(user, %{\n      display_name: \"New Name\",\n      metadata: %{level: 5, xp: 1200}\n    })","ref":"GameServer.Types.html#t:user_update_attrs/0-example"},{"type":"module","title":"GameServer.Accounts","doc":"The Accounts context.","ref":"GameServer.Accounts.html"},{"type":"module","title":"Usage - GameServer.Accounts","doc":"# Lookup by id or email\n    user = GameServer.Accounts.get_user(123)\n    user = GameServer.Accounts.get_user_by_email(\"me@example.com\")\n\n    # Update a user\n    {:ok, user} = GameServer.Accounts.update_user(user, %{display_name: \"NewName\"})\n\n    # Search (paginated) and count\n    users = GameServer.Accounts.search_users(\"bob\", page: 1, page_size: 25)\n    count = GameServer.Accounts.count_search_users(\"bob\")","ref":"GameServer.Accounts.html#module-usage"},{"type":"function","title":"GameServer.Accounts.attach_device_to_user/2","doc":"Attach a device_id to an existing user record. Returns {:ok, user} or\n{:error, changeset} if the device_id is already used.","ref":"GameServer.Accounts.html#attach_device_to_user/2"},{"type":"function","title":"GameServer.Accounts.broadcast_user_update/1","doc":"Broadcast that the given user has been updated.\n\nThis helper is intentionally small and only broadcasts a compact payload\nintended for client consumption through the `user: ` topic.","ref":"GameServer.Accounts.html#broadcast_user_update/1"},{"type":"function","title":"GameServer.Accounts.change_user_display_name/2","doc":"Returns an `%Ecto.Changeset{}` for changing the user display_name.","ref":"GameServer.Accounts.html#change_user_display_name/2"},{"type":"function","title":"GameServer.Accounts.change_user_email/3","doc":"Returns an `%Ecto.Changeset{}` for changing the user email.\n\nSee `GameServer.Accounts.User.email_changeset/3` for a list of supported options.","ref":"GameServer.Accounts.html#change_user_email/3"},{"type":"function","title":"Examples - GameServer.Accounts.change_user_email/3","doc":"iex> change_user_email(user)\n    %Ecto.Changeset{data: %User{}}","ref":"GameServer.Accounts.html#change_user_email/3-examples"},{"type":"function","title":"GameServer.Accounts.change_user_password/3","doc":"Returns an `%Ecto.Changeset{}` for changing the user password.\n\nSee `GameServer.Accounts.User.password_changeset/3` for a list of supported options.","ref":"GameServer.Accounts.html#change_user_password/3"},{"type":"function","title":"Examples - GameServer.Accounts.change_user_password/3","doc":"iex> change_user_password(user)\n    %Ecto.Changeset{data: %User{}}","ref":"GameServer.Accounts.html#change_user_password/3-examples"},{"type":"function","title":"GameServer.Accounts.change_user_registration/2","doc":"","ref":"GameServer.Accounts.html#change_user_registration/2"},{"type":"function","title":"GameServer.Accounts.confirm_user/1","doc":"Confirms a user's email by setting confirmed_at timestamp.","ref":"GameServer.Accounts.html#confirm_user/1"},{"type":"function","title":"Examples - GameServer.Accounts.confirm_user/1","doc":"iex> confirm_user(user)\n    {:ok, %User{}}","ref":"GameServer.Accounts.html#confirm_user/1-examples"},{"type":"function","title":"GameServer.Accounts.confirm_user_by_token/1","doc":"Confirm a user by an email confirmation token (context: \"confirm\").\n\nReturns {:ok, user} when the token is valid and user was confirmed.\nReturns {:error, :not_found} or {:error, :expired} when token is invalid/expired.","ref":"GameServer.Accounts.html#confirm_user_by_token/1"},{"type":"function","title":"GameServer.Accounts.count_search_users/1","doc":"Count users matching a text query (email or display_name). Returns integer.","ref":"GameServer.Accounts.html#count_search_users/1"},{"type":"function","title":"GameServer.Accounts.count_users/0","doc":"Returns the total number of users.","ref":"GameServer.Accounts.html#count_users/0"},{"type":"function","title":"GameServer.Accounts.count_users_active_since/1","doc":"Count users active (authenticated_at updated) in the last N days.\nUses UserToken inserted_at to track recent authentications.","ref":"GameServer.Accounts.html#count_users_active_since/1"},{"type":"function","title":"GameServer.Accounts.count_users_registered_since/1","doc":"Count users registered in the last N days.","ref":"GameServer.Accounts.html#count_users_registered_since/1"},{"type":"function","title":"GameServer.Accounts.count_users_with_password/0","doc":"Count users with a password set (hashed_password not nil/empty).","ref":"GameServer.Accounts.html#count_users_with_password/0"},{"type":"function","title":"GameServer.Accounts.count_users_with_provider/1","doc":"Count users with non-empty provider id for a given provider field (e.g. :google_id)","ref":"GameServer.Accounts.html#count_users_with_provider/1"},{"type":"function","title":"GameServer.Accounts.delete_user/1","doc":"Deletes a user and associated resources.\n\nReturns `{:ok, user}` on success or `{:error, changeset}` on failure.","ref":"GameServer.Accounts.html#delete_user/1"},{"type":"function","title":"GameServer.Accounts.delete_user_session_token/1","doc":"Deletes the signed token with the given context.","ref":"GameServer.Accounts.html#delete_user_session_token/1"},{"type":"function","title":"GameServer.Accounts.deliver_login_instructions/2","doc":"Delivers the magic link login instructions to the given user.","ref":"GameServer.Accounts.html#deliver_login_instructions/2"},{"type":"function","title":"GameServer.Accounts.deliver_user_confirmation_instructions/2","doc":"","ref":"GameServer.Accounts.html#deliver_user_confirmation_instructions/2"},{"type":"function","title":"GameServer.Accounts.deliver_user_update_email_instructions/3","doc":"Delivers the update email instructions to the given user.","ref":"GameServer.Accounts.html#deliver_user_update_email_instructions/3"},{"type":"function","title":"Examples - GameServer.Accounts.deliver_user_update_email_instructions/3","doc":"iex> deliver_user_update_email_instructions(user, current_email, &url(~p\"/users/settings/confirm-email/#{&1}\"))\n    {:ok, %{to: ..., body: ...}}","ref":"GameServer.Accounts.html#deliver_user_update_email_instructions/3-examples"},{"type":"function","title":"GameServer.Accounts.device_auth_enabled?/0","doc":"Returns true when device-based auth is enabled. This checks the\napplication config `:game_server, :device_auth_enabled` and falls back\nto the environment variable `DEVICE_AUTH_ENABLED`. If neither\nis set, device auth is enabled by default.","ref":"GameServer.Accounts.html#device_auth_enabled?/0"},{"type":"function","title":"GameServer.Accounts.find_or_create_from_apple/1","doc":"Finds a user by Apple ID or creates a new user from OAuth data.","ref":"GameServer.Accounts.html#find_or_create_from_apple/1"},{"type":"function","title":"Examples - GameServer.Accounts.find_or_create_from_apple/1","doc":"iex> find_or_create_from_apple(%{apple_id: \"123\", email: \"user@example.com\"})\n    {:ok, %User{}}","ref":"GameServer.Accounts.html#find_or_create_from_apple/1-examples"},{"type":"function","title":"GameServer.Accounts.find_or_create_from_device/2","doc":"Finds or creates a user associated with the given device_id.\n\nIf a user already exists with the device_id we return it. Otherwise we\ncreate an anonymous confirmed user and attach the device_id.","ref":"GameServer.Accounts.html#find_or_create_from_device/2"},{"type":"function","title":"GameServer.Accounts.find_or_create_from_discord/1","doc":"Finds a user by Discord ID or creates a new user from OAuth data.","ref":"GameServer.Accounts.html#find_or_create_from_discord/1"},{"type":"function","title":"Examples - GameServer.Accounts.find_or_create_from_discord/1","doc":"iex> find_or_create_from_discord(%{discord_id: \"123\", email: \"user@example.com\"})\n    {:ok, %User{}}","ref":"GameServer.Accounts.html#find_or_create_from_discord/1-examples"},{"type":"function","title":"GameServer.Accounts.find_or_create_from_facebook/1","doc":"Finds a user by Facebook ID or creates a new user from OAuth data.","ref":"GameServer.Accounts.html#find_or_create_from_facebook/1"},{"type":"function","title":"Examples - GameServer.Accounts.find_or_create_from_facebook/1","doc":"iex> find_or_create_from_facebook(%{facebook_id: \"123\", email: \"user@example.com\"})\n    {:ok, %User{}}","ref":"GameServer.Accounts.html#find_or_create_from_facebook/1-examples"},{"type":"function","title":"GameServer.Accounts.find_or_create_from_google/1","doc":"Finds a user by Google ID or creates a new user from OAuth data.","ref":"GameServer.Accounts.html#find_or_create_from_google/1"},{"type":"function","title":"Examples - GameServer.Accounts.find_or_create_from_google/1","doc":"iex> find_or_create_from_google(%{google_id: \"123\", email: \"user@example.com\"})\n    {:ok, %User{}}","ref":"GameServer.Accounts.html#find_or_create_from_google/1-examples"},{"type":"function","title":"GameServer.Accounts.find_or_create_from_steam/1","doc":"Finds a user by Steam ID or creates a new user from Steam OpenID data.","ref":"GameServer.Accounts.html#find_or_create_from_steam/1"},{"type":"function","title":"Examples - GameServer.Accounts.find_or_create_from_steam/1","doc":"iex> find_or_create_from_steam(%{steam_id: \"12345\", email: \"user@example.com\"})\n    {:ok, %User{}}","ref":"GameServer.Accounts.html#find_or_create_from_steam/1-examples"},{"type":"function","title":"GameServer.Accounts.generate_user_session_token/1","doc":"Generates a session token.","ref":"GameServer.Accounts.html#generate_user_session_token/1"},{"type":"function","title":"GameServer.Accounts.get_linked_providers/1","doc":"Returns a map of linked OAuth providers for the user.\n\nEach provider is a boolean indicating whether that provider is linked.","ref":"GameServer.Accounts.html#get_linked_providers/1"},{"type":"function","title":"GameServer.Accounts.get_user/1","doc":"Gets a single user by ID.\n\nReturns `nil` if the User does not exist.","ref":"GameServer.Accounts.html#get_user/1"},{"type":"function","title":"Examples - GameServer.Accounts.get_user/1","doc":"iex> get_user(123)\n    %User{}\n\n    iex> get_user(456)\n    nil","ref":"GameServer.Accounts.html#get_user/1-examples"},{"type":"function","title":"GameServer.Accounts.get_user!/1","doc":"Gets a single user.\n\nRaises `Ecto.NoResultsError` if the User does not exist.","ref":"GameServer.Accounts.html#get_user!/1"},{"type":"function","title":"Examples - GameServer.Accounts.get_user!/1","doc":"iex> get_user!(123)\n    %User{}\n\n    iex> get_user!(456)\n    ** (Ecto.NoResultsError)","ref":"GameServer.Accounts.html#get_user!/1-examples"},{"type":"function","title":"GameServer.Accounts.get_user_by_apple_id/1","doc":"Get a user by their Apple ID.\n\nReturns `%User{}` or `nil`.","ref":"GameServer.Accounts.html#get_user_by_apple_id/1"},{"type":"function","title":"GameServer.Accounts.get_user_by_discord_id/1","doc":"Get a user by their Discord ID.\n\nReturns `%User{}` or `nil`.","ref":"GameServer.Accounts.html#get_user_by_discord_id/1"},{"type":"function","title":"GameServer.Accounts.get_user_by_email/1","doc":"Gets a user by email.","ref":"GameServer.Accounts.html#get_user_by_email/1"},{"type":"function","title":"Examples - GameServer.Accounts.get_user_by_email/1","doc":"iex> get_user_by_email(\"foo@example.com\")\n    %User{}\n\n    iex> get_user_by_email(\"unknown@example.com\")\n    nil","ref":"GameServer.Accounts.html#get_user_by_email/1-examples"},{"type":"function","title":"GameServer.Accounts.get_user_by_email_and_password/2","doc":"Gets a user by email and password.","ref":"GameServer.Accounts.html#get_user_by_email_and_password/2"},{"type":"function","title":"Examples - GameServer.Accounts.get_user_by_email_and_password/2","doc":"iex> get_user_by_email_and_password(\"foo@example.com\", \"correct_password\")\n    %User{}\n\n    iex> get_user_by_email_and_password(\"foo@example.com\", \"invalid_password\")\n    nil","ref":"GameServer.Accounts.html#get_user_by_email_and_password/2-examples"},{"type":"function","title":"GameServer.Accounts.get_user_by_facebook_id/1","doc":"Get a user by their Facebook ID.\n\nReturns `%User{}` or `nil`.","ref":"GameServer.Accounts.html#get_user_by_facebook_id/1"},{"type":"function","title":"GameServer.Accounts.get_user_by_google_id/1","doc":"Get a user by their Google ID.\n\nReturns `%User{}` or `nil`.","ref":"GameServer.Accounts.html#get_user_by_google_id/1"},{"type":"function","title":"GameServer.Accounts.get_user_by_magic_link_token/1","doc":"Gets the user with the given magic link token.","ref":"GameServer.Accounts.html#get_user_by_magic_link_token/1"},{"type":"function","title":"GameServer.Accounts.get_user_by_session_token/1","doc":"Gets the user with the given signed token.\n\nIf the token is valid `{user, token_inserted_at}` is returned, otherwise `nil` is returned.","ref":"GameServer.Accounts.html#get_user_by_session_token/1"},{"type":"function","title":"GameServer.Accounts.get_user_by_steam_id/1","doc":"Get a user by their Steam ID (steam_id).\n\nReturns `%User{}` or `nil`.","ref":"GameServer.Accounts.html#get_user_by_steam_id/1"},{"type":"function","title":"GameServer.Accounts.has_password?/1","doc":"Returns whether the user has a password set.","ref":"GameServer.Accounts.html#has_password?/1"},{"type":"function","title":"GameServer.Accounts.link_account/4","doc":"Link an OAuth provider to an existing user account. Updates the user\nvia the provider's oauth changeset while being careful not to overwrite\nexisting email or avatars.\n\nExample: link_account(user, %{discord_id: \"123\", profile_url: \"https://...\"}, :discord_id, &User.discord_oauth_changeset/2)","ref":"GameServer.Accounts.html#link_account/4"},{"type":"function","title":"GameServer.Accounts.link_device_id/2","doc":"Link a device_id to an existing user account. This allows the user to\nauthenticate using the device_id in addition to their OAuth providers.\n\nReturns {:ok, user} on success or {:error, changeset} if the device_id\nis already used by another account.","ref":"GameServer.Accounts.html#link_device_id/2"},{"type":"function","title":"GameServer.Accounts.login_user_by_magic_link/1","doc":"Logs the user in by magic link.\n\nThere are three cases to consider:\n\n1. The user has already confirmed their email. They are logged in\n   and the magic link is expired.\n\n2. The user has not confirmed their email and no password is set.\n   In this case, the user gets confirmed, logged in, and all tokens -\n   including session ones - are expired. In theory, no other tokens\n   exist but we delete all of them for best security practices.\n\n3. The user has not confirmed their email but a password is set.\n   This cannot happen in the default implementation but may be the\n   source of security pitfalls. See the \"Mixing magic link and password registration\" section of\n   `mix help phx.gen.auth`.","ref":"GameServer.Accounts.html#login_user_by_magic_link/1"},{"type":"function","title":"GameServer.Accounts.register_user/1","doc":"Registers a user.","ref":"GameServer.Accounts.html#register_user/1"},{"type":"function","title":"Attributes - GameServer.Accounts.register_user/1","doc":"See `t:GameServer.Types.user_registration_attrs/0` for available fields.","ref":"GameServer.Accounts.html#register_user/1-attributes"},{"type":"function","title":"Examples - GameServer.Accounts.register_user/1","doc":"iex> register_user(%{email: \"user@example.com\", password: \"secret123\"})\n    {:ok, %User{}}\n\n    iex> register_user(%{email: \"invalid\"})\n    {:error, %Ecto.Changeset{}}","ref":"GameServer.Accounts.html#register_user/1-examples"},{"type":"function","title":"GameServer.Accounts.register_user_and_deliver/3","doc":"Register a user and send the confirmation email inside a DB transaction.\n\nThe function accepts a `confirmation_url_fun` which must be a function of arity 1\nthat receives the encoded token and returns the confirmation URL string.\n\nIf sending the confirmation email fails the transaction is rolled back and\n`{:error, reason}` is returned. On success it returns `{:ok, user}`.","ref":"GameServer.Accounts.html#register_user_and_deliver/3"},{"type":"function","title":"GameServer.Accounts.search_users/2","doc":"Search users by email or display name (case-insensitive, partial match).\n\nReturns a list of User structs.","ref":"GameServer.Accounts.html#search_users/2"},{"type":"function","title":"Options - GameServer.Accounts.search_users/2","doc":"See `t:GameServer.Types.pagination_opts/0` for available options.","ref":"GameServer.Accounts.html#search_users/2-options"},{"type":"function","title":"GameServer.Accounts.sudo_mode?/2","doc":"Checks whether the user is in sudo mode.\n\nThe user is in sudo mode when the last authentication was done no further\nthan 20 minutes ago. The limit can be given as second argument in minutes.","ref":"GameServer.Accounts.html#sudo_mode?/2"},{"type":"function","title":"GameServer.Accounts.unlink_device_id/1","doc":"Unlink the device_id from a user's account.\n\nReturns {:ok, user} when successful or {:error, reason}.\n\nGuard: we only allow unlinking when the user will still have at least\none authentication method remaining (OAuth provider or password).\nThis prevents users losing all login methods unexpectedly.","ref":"GameServer.Accounts.html#unlink_device_id/1"},{"type":"function","title":"GameServer.Accounts.unlink_provider/2","doc":"Unlink an OAuth provider from a user's account.\n\nprovider should be one of :discord, :apple, :google, :facebook.\nThis will return {:ok, user} when successful or {:error, reason}.\n\nGuard: we only allow unlinking when the user will still have at least\none other social provider remaining. This prevents users losing all\nsocial logins unexpectedly.","ref":"GameServer.Accounts.html#unlink_provider/2"},{"type":"function","title":"GameServer.Accounts.update_user/2","doc":"Updates a user with the given attributes.\n\nThis function applies the `User.admin_changeset/2` then updates the user and\nbroadcasts the update on success. It returns the same tuple shape as\n`Repo.update/1` so callers can pattern-match as before.","ref":"GameServer.Accounts.html#update_user/2"},{"type":"function","title":"Attributes - GameServer.Accounts.update_user/2","doc":"See `t:GameServer.Types.user_update_attrs/0` for available fields.","ref":"GameServer.Accounts.html#update_user/2-attributes"},{"type":"function","title":"Examples - GameServer.Accounts.update_user/2","doc":"iex> update_user(user, %{display_name: \"NewName\"})\n    {:ok, %User{}}\n\n    iex> update_user(user, %{metadata: %{level: 5}})\n    {:ok, %User{}}","ref":"GameServer.Accounts.html#update_user/2-examples"},{"type":"function","title":"GameServer.Accounts.update_user_display_name/2","doc":"Updates the user's display name and broadcasts the change.","ref":"GameServer.Accounts.html#update_user_display_name/2"},{"type":"function","title":"GameServer.Accounts.update_user_email/2","doc":"Updates the user email using the given token.\n\nIf the token matches, the user email is updated and the token is deleted.","ref":"GameServer.Accounts.html#update_user_email/2"},{"type":"function","title":"GameServer.Accounts.update_user_password/2","doc":"Updates the user password.\n\nReturns a tuple with the updated user, as well as a list of expired tokens.","ref":"GameServer.Accounts.html#update_user_password/2"},{"type":"function","title":"Examples - GameServer.Accounts.update_user_password/2","doc":"iex> update_user_password(user, %{password: ...})\n    {:ok, {%User{}, [...]}}\n\n    iex> update_user_password(user, %{password: \"too short\"})\n    {:error, %Ecto.Changeset{}}","ref":"GameServer.Accounts.html#update_user_password/2-examples"},{"type":"module","title":"GameServer.Friends","doc":"Friends context - handles friend requests and relationships.\n\nBasic semantics:\n- A single `friendships` row represents a directed request from requester -> target.\n- status: \"pending\" | \"accepted\" | \"rejected\" | \"blocked\"\n- When a user accepts a pending incoming request, that request becomes `accepted`.\n  If a reverse pending request exists, it will be removed to avoid duplicate rows.\n- Listing friends returns the other user from rows with status `accepted` in either\n  direction.","ref":"GameServer.Friends.html"},{"type":"module","title":"Usage - GameServer.Friends","doc":"# Create a friend request (requester -> target)\n    {:ok, friendship} = GameServer.Friends.create_request(requester_id, target_id)\n\n    # Accept a pending incoming request (performed by the target)\n    {:ok, accepted} = GameServer.Friends.accept_friend_request(friendship.id, %GameServer.Accounts.User{id: target_id})\n\n    # List accepted friends for a user (paginated)\n    friends = GameServer.Friends.list_friends_for_user(user_id, page: 1, page_size: 25)\n\n    # Count accepted friends for a user\n    count = GameServer.Friends.count_friends_for_user(user_id)\n\n    # Remove a friendship (either direction)\n    {:ok, _} = GameServer.Friends.remove_friend(user_id, friend_id)","ref":"GameServer.Friends.html#module-usage"},{"type":"function","title":"GameServer.Friends.accept_friend_request/2","doc":"Accept a friend request (only the target may accept). Returns {:ok, friendship}.","ref":"GameServer.Friends.html#accept_friend_request/2"},{"type":"function","title":"GameServer.Friends.block_friend_request/2","doc":"Block an incoming request (only the target may block). Returns {:ok, friendship} with status \"blocked\".","ref":"GameServer.Friends.html#block_friend_request/2"},{"type":"function","title":"GameServer.Friends.cancel_request/2","doc":"Cancel an outgoing friend request (only the requester may cancel).","ref":"GameServer.Friends.html#cancel_request/2"},{"type":"function","title":"GameServer.Friends.count_blocked_for_user/1","doc":"Count blocked friendships for a user (number of blocked rows where user is target).","ref":"GameServer.Friends.html#count_blocked_for_user/1"},{"type":"function","title":"GameServer.Friends.count_friends_for_user/1","doc":"Count accepted friends for a given user (distinct other user ids).","ref":"GameServer.Friends.html#count_friends_for_user/1"},{"type":"function","title":"GameServer.Friends.count_incoming_requests/1","doc":"Count incoming pending friend requests for a user.","ref":"GameServer.Friends.html#count_incoming_requests/1"},{"type":"function","title":"GameServer.Friends.count_outgoing_requests/1","doc":"Count outgoing pending friend requests for a user.","ref":"GameServer.Friends.html#count_outgoing_requests/1"},{"type":"function","title":"GameServer.Friends.create_request/2","doc":"Create a friend request from requester -> target.\n  If a reverse pending request exists (target -> requester) it will be accepted instead.\n  Returns {:ok, friendship} on success or {:error, reason}.","ref":"GameServer.Friends.html#create_request/2"},{"type":"function","title":"GameServer.Friends.get_by_pair/2","doc":"Get friendship between two users (ordered requester->target) if exists","ref":"GameServer.Friends.html#get_by_pair/2"},{"type":"function","title":"GameServer.Friends.get_friendship!/1","doc":"Get friendship by id","ref":"GameServer.Friends.html#get_friendship!/1"},{"type":"function","title":"GameServer.Friends.list_blocked_for_user/2","doc":"List blocked friendships for a user (Friendship structs where the user is the blocker / target).","ref":"GameServer.Friends.html#list_blocked_for_user/2"},{"type":"function","title":"GameServer.Friends.list_friends_for_user/2","doc":"List accepted friends for a given user id - returns list of User structs.","ref":"GameServer.Friends.html#list_friends_for_user/2"},{"type":"function","title":"Options - GameServer.Friends.list_friends_for_user/2","doc":"See `t:GameServer.Types.pagination_opts/0` for available options.","ref":"GameServer.Friends.html#list_friends_for_user/2-options"},{"type":"function","title":"GameServer.Friends.list_incoming_requests/2","doc":"List incoming pending friend requests for a user (Friendship structs).","ref":"GameServer.Friends.html#list_incoming_requests/2"},{"type":"function","title":"Options - GameServer.Friends.list_incoming_requests/2","doc":"See `t:GameServer.Types.pagination_opts/0` for available options.","ref":"GameServer.Friends.html#list_incoming_requests/2-options"},{"type":"function","title":"GameServer.Friends.list_outgoing_requests/2","doc":"List outgoing pending friend requests for a user (Friendship structs).","ref":"GameServer.Friends.html#list_outgoing_requests/2"},{"type":"function","title":"Options - GameServer.Friends.list_outgoing_requests/2","doc":"See `t:GameServer.Types.pagination_opts/0` for available options.","ref":"GameServer.Friends.html#list_outgoing_requests/2-options"},{"type":"function","title":"GameServer.Friends.reject_friend_request/2","doc":"Reject a friend request (only the target may reject). Returns {:ok, friendship}.","ref":"GameServer.Friends.html#reject_friend_request/2"},{"type":"function","title":"GameServer.Friends.remove_friend/2","doc":"Remove a friendship (either direction) - only participating users may call this.","ref":"GameServer.Friends.html#remove_friend/2"},{"type":"function","title":"GameServer.Friends.subscribe_user/1","doc":"","ref":"GameServer.Friends.html#subscribe_user/1"},{"type":"function","title":"GameServer.Friends.unblock_friendship/2","doc":"Unblock a previously-blocked friendship (only the user who blocked may unblock). Returns {:ok, :unblocked} on success.","ref":"GameServer.Friends.html#unblock_friendship/2"},{"type":"function","title":"GameServer.Friends.unsubscribe_user/1","doc":"","ref":"GameServer.Friends.html#unsubscribe_user/1"},{"type":"behaviour","title":"GameServer.Hooks","doc":"Behaviour for application-level hooks / callbacks.\n\nImplement this behaviour to receive lifecycle events from core flows\n(registration, login, provider linking, deletion) and run custom logic.\n\nA module implementing this behaviour can be configured with\n\n    config :game_server, :hooks_module, MyApp.HooksImpl\n\nThe default implementation is a no-op.","ref":"GameServer.Hooks.html"},{"type":"type","title":"GameServer.Hooks.hook_result/1","doc":"","ref":"GameServer.Hooks.html#t:hook_result/1"},{"type":"callback","title":"GameServer.Hooks.after_lobby_create/1","doc":"","ref":"GameServer.Hooks.html#c:after_lobby_create/1"},{"type":"callback","title":"GameServer.Hooks.after_lobby_delete/1","doc":"","ref":"GameServer.Hooks.html#c:after_lobby_delete/1"},{"type":"callback","title":"GameServer.Hooks.after_lobby_host_change/2","doc":"","ref":"GameServer.Hooks.html#c:after_lobby_host_change/2"},{"type":"callback","title":"GameServer.Hooks.after_lobby_join/2","doc":"","ref":"GameServer.Hooks.html#c:after_lobby_join/2"},{"type":"callback","title":"GameServer.Hooks.after_lobby_leave/2","doc":"","ref":"GameServer.Hooks.html#c:after_lobby_leave/2"},{"type":"callback","title":"GameServer.Hooks.after_lobby_update/1","doc":"","ref":"GameServer.Hooks.html#c:after_lobby_update/1"},{"type":"callback","title":"GameServer.Hooks.after_startup/0","doc":"","ref":"GameServer.Hooks.html#c:after_startup/0"},{"type":"callback","title":"GameServer.Hooks.after_user_kicked/3","doc":"","ref":"GameServer.Hooks.html#c:after_user_kicked/3"},{"type":"callback","title":"GameServer.Hooks.after_user_login/1","doc":"","ref":"GameServer.Hooks.html#c:after_user_login/1"},{"type":"callback","title":"GameServer.Hooks.after_user_register/1","doc":"","ref":"GameServer.Hooks.html#c:after_user_register/1"},{"type":"callback","title":"GameServer.Hooks.before_lobby_create/1","doc":"","ref":"GameServer.Hooks.html#c:before_lobby_create/1"},{"type":"callback","title":"GameServer.Hooks.before_lobby_delete/1","doc":"","ref":"GameServer.Hooks.html#c:before_lobby_delete/1"},{"type":"callback","title":"GameServer.Hooks.before_lobby_join/3","doc":"","ref":"GameServer.Hooks.html#c:before_lobby_join/3"},{"type":"callback","title":"GameServer.Hooks.before_lobby_leave/2","doc":"","ref":"GameServer.Hooks.html#c:before_lobby_leave/2"},{"type":"callback","title":"GameServer.Hooks.before_lobby_update/2","doc":"","ref":"GameServer.Hooks.html#c:before_lobby_update/2"},{"type":"callback","title":"GameServer.Hooks.before_stop/0","doc":"","ref":"GameServer.Hooks.html#c:before_stop/0"},{"type":"callback","title":"GameServer.Hooks.before_user_kicked/3","doc":"","ref":"GameServer.Hooks.html#c:before_user_kicked/3"},{"type":"function","title":"GameServer.Hooks.call/3","doc":"Call an arbitrary function exported by the configured hooks module.\n\nThis is a safe wrapper that checks function existence, enforces an allow-list\nif configured and runs the call inside a short Task with a configurable\ntimeout to avoid long-running user code.\n\nReturns {:ok, result} | {:error, reason}","ref":"GameServer.Hooks.html#call/3"},{"type":"function","title":"GameServer.Hooks.caller/0","doc":"When a hooks function is executed via `call/3` or `internal_call/3`, an\noptional `:caller` can be provided in the options. The caller will be\ninjected into the spawned task's process dictionary and is accessible via\n`GameServer.Hooks.caller/0` (the raw value) or `caller_id/0` (the numeric id\nwhen the value is a user struct or map containing `:id`).","ref":"GameServer.Hooks.html#caller/0"},{"type":"function","title":"GameServer.Hooks.caller_id/0","doc":"","ref":"GameServer.Hooks.html#caller_id/0"},{"type":"function","title":"GameServer.Hooks.caller_user/0","doc":"Return the user struct for the current caller when available. This will\n  attempt to resolve the caller via GameServer.Accounts.get_user!/1 when the\n  caller is an integer id or a map containing an `:id` key. Returns nil when\n  no caller or user is found.","ref":"GameServer.Hooks.html#caller_user/0"},{"type":"function","title":"GameServer.Hooks.exported_functions/1","doc":"Return a list of exported functions on the currently registered hooks module.\n\nThe result is a list of maps like: [%{name: \"start_game\", arities: [2,3]}, ...]\nThis is useful for tooling and admin UI to display what RPCs are available.","ref":"GameServer.Hooks.html#exported_functions/1"},{"type":"function","title":"GameServer.Hooks.internal_call/3","doc":"Call an internal lifecycle callback. When a callback is missing this\n  returns a sensible default (eg. {:ok, attrs} for before callbacks) so\n  domain code doesn't need to handle missing hooks specially in most cases.","ref":"GameServer.Hooks.html#internal_call/3"},{"type":"function","title":"GameServer.Hooks.invoke/2","doc":"Invoke a dynamic hook function by name.\n\nThis is used by `GameServer.Schedule` to call scheduled job callbacks.\nUnlike `internal_call/3`, this is designed for user-defined functions\nthat are not part of the core lifecycle callbacks.\n\nReturns `:ok` on success, `{:error, reason}` on failure or if the\nfunction doesn't exist.","ref":"GameServer.Hooks.html#invoke/2"},{"type":"function","title":"GameServer.Hooks.module/0","doc":"Return the configured module that implements the hooks behaviour.","ref":"GameServer.Hooks.html#module/0"},{"type":"module","title":"GameServer.Leaderboards","doc":"The Leaderboards context.\n\nProvides server-authoritative leaderboard management. Scores can only be\nsubmitted via server-side code  there is no public API for score submission.","ref":"GameServer.Leaderboards.html"},{"type":"module","title":"Usage - GameServer.Leaderboards","doc":"# Create a leaderboard\n    {:ok, lb} = Leaderboards.create_leaderboard(%{\n      slug: \"weekly_kills\",\n      title: \"Weekly Kills\",\n      sort_order: :desc,\n      operator: :incr\n    })\n\n    # Submit score (server-only): resolve the active leaderboard first and submit by integer ID\n    leaderboard = Leaderboards.get_active_leaderboard_by_slug(\"weekly_kills\")\n    {:ok, record} = Leaderboards.submit_score(leaderboard.id, user_id, 10)\n\n    # List records with rank (use integer leaderboard id)\n    records = Leaderboards.list_records(leaderboard.id, page: 1, limit: 25)\n\n    # Get user's record (use integer leaderboard id)\n    {:ok, record} = Leaderboards.get_user_record(leaderboard.id, user_id)","ref":"GameServer.Leaderboards.html#module-usage"},{"type":"function","title":"GameServer.Leaderboards.change_leaderboard/2","doc":"Returns a changeset for a leaderboard (used in forms).","ref":"GameServer.Leaderboards.html#change_leaderboard/2"},{"type":"function","title":"GameServer.Leaderboards.change_record/2","doc":"Returns a changeset for a record (used in admin forms).","ref":"GameServer.Leaderboards.html#change_record/2"},{"type":"function","title":"GameServer.Leaderboards.count_all_records/0","doc":"Count all leaderboard records across all leaderboards.","ref":"GameServer.Leaderboards.html#count_all_records/0"},{"type":"function","title":"GameServer.Leaderboards.count_leaderboard_groups/0","doc":"Counts unique leaderboard slugs.","ref":"GameServer.Leaderboards.html#count_leaderboard_groups/0"},{"type":"function","title":"GameServer.Leaderboards.count_leaderboards/1","doc":"Counts leaderboards matching the given filters.\n\nAccepts the same filter options as `list_leaderboards/1`.","ref":"GameServer.Leaderboards.html#count_leaderboards/1"},{"type":"function","title":"GameServer.Leaderboards.count_records/1","doc":"Counts records for a leaderboard.","ref":"GameServer.Leaderboards.html#count_records/1"},{"type":"function","title":"GameServer.Leaderboards.create_leaderboard/1","doc":"Creates a new leaderboard.","ref":"GameServer.Leaderboards.html#create_leaderboard/1"},{"type":"function","title":"Attributes - GameServer.Leaderboards.create_leaderboard/1","doc":"See `t:GameServer.Types.leaderboard_create_attrs/0` for available fields.","ref":"GameServer.Leaderboards.html#create_leaderboard/1-attributes"},{"type":"function","title":"Examples - GameServer.Leaderboards.create_leaderboard/1","doc":"iex> create_leaderboard(%{slug: \"my_lb\", title: \"My Leaderboard\"})\n    {:ok, %Leaderboard{}}\n\n    iex> create_leaderboard(%{slug: \"\", title: \"\"})\n    {:error, %Ecto.Changeset{}}","ref":"GameServer.Leaderboards.html#create_leaderboard/1-examples"},{"type":"function","title":"GameServer.Leaderboards.delete_leaderboard/1","doc":"Deletes a leaderboard and all its records.","ref":"GameServer.Leaderboards.html#delete_leaderboard/1"},{"type":"function","title":"GameServer.Leaderboards.delete_record/1","doc":"Deletes a record.","ref":"GameServer.Leaderboards.html#delete_record/1"},{"type":"function","title":"GameServer.Leaderboards.delete_user_record/2","doc":"Deletes a user's record from a leaderboard.\nAccepts either leaderboard ID (integer) or slug (string).","ref":"GameServer.Leaderboards.html#delete_user_record/2"},{"type":"function","title":"GameServer.Leaderboards.end_leaderboard/1","doc":"Ends a leaderboard by setting `ends_at` to the current time.","ref":"GameServer.Leaderboards.html#end_leaderboard/1"},{"type":"function","title":"GameServer.Leaderboards.get_active_leaderboard_by_slug/1","doc":"Gets the currently active leaderboard with the given slug.\nReturns `nil` if no active leaderboard exists.\n\nAn active leaderboard is one that:\n- Has not ended (`ends_at` is nil or in the future)\n- Has started (`starts_at` is nil or in the past)\n\nIf multiple active leaderboards exist with the same slug,\nreturns the most recently created one.","ref":"GameServer.Leaderboards.html#get_active_leaderboard_by_slug/1"},{"type":"function","title":"GameServer.Leaderboards.get_leaderboard/1","doc":"Gets a leaderboard by its integer ID.","ref":"GameServer.Leaderboards.html#get_leaderboard/1"},{"type":"function","title":"Examples - GameServer.Leaderboards.get_leaderboard/1","doc":"iex> get_leaderboard(123)\n    %Leaderboard{id: 123}\n\n    iex> get_leaderboard(999)\n    nil","ref":"GameServer.Leaderboards.html#get_leaderboard/1-examples"},{"type":"function","title":"GameServer.Leaderboards.get_leaderboard!/1","doc":"Gets a leaderboard by its integer ID. Raises if not found.","ref":"GameServer.Leaderboards.html#get_leaderboard!/1"},{"type":"function","title":"GameServer.Leaderboards.get_record/2","doc":"Gets a single record by leaderboard ID and user ID.","ref":"GameServer.Leaderboards.html#get_record/2"},{"type":"function","title":"GameServer.Leaderboards.get_user_record/2","doc":"Gets a user's record with their rank.\nReturns `{:ok, record_with_rank}` or `{:error, :not_found}`.","ref":"GameServer.Leaderboards.html#get_user_record/2"},{"type":"function","title":"GameServer.Leaderboards.list_leaderboard_groups/1","doc":"Lists unique leaderboard slugs with summary info.\n\nReturns a list of maps with:\n- `:slug` - the leaderboard slug\n- `:title` - title from the latest leaderboard\n- `:description` - description from the latest leaderboard\n- `:active_id` - ID of the currently active leaderboard (or nil)\n- `:latest_id` - ID of the most recent leaderboard\n- `:season_count` - total number of leaderboards with this slug","ref":"GameServer.Leaderboards.html#list_leaderboard_groups/1"},{"type":"function","title":"GameServer.Leaderboards.list_leaderboards/1","doc":"Lists leaderboards with optional filters.","ref":"GameServer.Leaderboards.html#list_leaderboards/1"},{"type":"function","title":"Options - GameServer.Leaderboards.list_leaderboards/1","doc":"* `:slug` - Filter by slug (returns all seasons of that leaderboard)\n  * `:active` - If `true`, only active leaderboards. If `false`, only ended.\n  * `:order_by` - Order by field: `:ends_at` or `:inserted_at` (default)\n  * `:starts_after` - Only leaderboards that started after this DateTime\n  * `:starts_before` - Only leaderboards that started before this DateTime\n  * `:ends_after` - Only leaderboards that end after this DateTime\n  * `:ends_before` - Only leaderboards that end before this DateTime\n  * `:page` - Page number (default 1)\n  * `:page_size` - Page size (default 25)","ref":"GameServer.Leaderboards.html#list_leaderboards/1-options"},{"type":"function","title":"Examples - GameServer.Leaderboards.list_leaderboards/1","doc":"iex> list_leaderboards(active: true)\n    [%Leaderboard{}, ...]\n\n    iex> list_leaderboards(slug: \"weekly_kills\")\n    [%Leaderboard{}, ...]\n\n    iex> list_leaderboards(starts_after: ~U[2025-01-01 00:00:00Z])\n    [%Leaderboard{}, ...]","ref":"GameServer.Leaderboards.html#list_leaderboards/1-examples"},{"type":"function","title":"GameServer.Leaderboards.list_leaderboards_by_slug/2","doc":"Lists all leaderboards with the given slug (all seasons), ordered by end date.","ref":"GameServer.Leaderboards.html#list_leaderboards_by_slug/2"},{"type":"function","title":"GameServer.Leaderboards.list_records/2","doc":"Lists records for a leaderboard, ordered by rank.","ref":"GameServer.Leaderboards.html#list_records/2"},{"type":"function","title":"Options - GameServer.Leaderboards.list_records/2","doc":"See `t:GameServer.Types.pagination_opts/0` for available options.\n\nReturns records with `rank` field populated.","ref":"GameServer.Leaderboards.html#list_records/2-options"},{"type":"function","title":"GameServer.Leaderboards.list_records_around_user/3","doc":"Lists records around a specific user (centered on their position).\n\nReturns records above and below the user's rank.","ref":"GameServer.Leaderboards.html#list_records_around_user/3"},{"type":"function","title":"Options - GameServer.Leaderboards.list_records_around_user/3","doc":"* `:limit` - Total number of records to return (default 11, centered on user)","ref":"GameServer.Leaderboards.html#list_records_around_user/3-options"},{"type":"function","title":"GameServer.Leaderboards.submit_score/4","doc":"Submits a score for a user on a leaderboard.\n\nThis is a server-only function  there is no public API for score submission.\nThe score is processed according to the leaderboard's operator:\n\n  * `:set`  Always replace with new score\n  * `:best`  Only update if new score is better (respects sort_order)\n  * `:incr`  Add to existing score\n  * `:decr`  Subtract from existing score\n\nTo submit to a leaderboard by slug, first get the active leaderboard ID:\n\n    leaderboard = Leaderboards.get_active_leaderboard_by_slug(\"weekly_kills\")\n    Leaderboards.submit_score(leaderboard.id, user_id, 10)","ref":"GameServer.Leaderboards.html#submit_score/4"},{"type":"function","title":"Examples - GameServer.Leaderboards.submit_score/4","doc":"iex> submit_score(123, user_id, 10)\n    {:ok, %Record{score: 10}}\n\n    iex> submit_score(123, user_id, 5, %{weapon: \"sword\"})\n    {:ok, %Record{score: 15, metadata: %{weapon: \"sword\"}}}","ref":"GameServer.Leaderboards.html#submit_score/4-examples"},{"type":"function","title":"GameServer.Leaderboards.update_leaderboard/2","doc":"Updates an existing leaderboard.\n\nNote: `slug`, `sort_order`, and `operator` cannot be changed after creation.","ref":"GameServer.Leaderboards.html#update_leaderboard/2"},{"type":"function","title":"Attributes - GameServer.Leaderboards.update_leaderboard/2","doc":"See `t:GameServer.Types.leaderboard_update_attrs/0` for available fields.","ref":"GameServer.Leaderboards.html#update_leaderboard/2-attributes"},{"type":"module","title":"GameServer.Lobbies","doc":"Context module for lobby management: creating, updating, listing and searching lobbies.\n\nThis module contains the core domain operations; more advanced membership and\npermission logic will be added in follow-up tasks.","ref":"GameServer.Lobbies.html"},{"type":"module","title":"Usage - GameServer.Lobbies","doc":"# Create a lobby (returns {:ok, lobby} | {:error, changeset})\n    {:ok, lobby} = GameServer.Lobbies.create_lobby(%{name: \"fun-room\", title: \"Fun Room\", host_id: host_id})\n\n    # List public lobbies (paginated/filterable)\n    lobbies = GameServer.Lobbies.list_lobbies(%{}, page: 1, page_size: 25)\n\n    # Join and leave\n    {:ok, user} = GameServer.Lobbies.join_lobby(user, lobby.id)\n    {:ok, _} = GameServer.Lobbies.leave_lobby(user)\n\n    # Get current lobby members\n    members = GameServer.Lobbies.get_lobby_members(lobby)\n\n    # Subscribe to global or per-lobby events\n    :ok = GameServer.Lobbies.subscribe_lobbies()\n    :ok = GameServer.Lobbies.subscribe_lobby(lobby.id)","ref":"GameServer.Lobbies.html#module-usage"},{"type":"module","title":"PubSub Events - GameServer.Lobbies","doc":"This module broadcasts the following events:\n\n- `\"lobbies\"` topic (global lobby list changes):\n  - `{:lobby_created, lobby}` - a new lobby was created\n  - `{:lobby_updated, lobby}` - a lobby was updated\n  - `{:lobby_deleted, lobby_id}` - a lobby was deleted\n\n- `\"lobby: \"` topic (per-lobby membership changes):\n  - `{:user_joined, lobby_id, user_id}` - a user joined the lobby\n  - `{:user_left, lobby_id, user_id}` - a user left the lobby\n  - `{:user_kicked, lobby_id, user_id}` - a user was kicked from the lobby\n  - `{:lobby_updated, lobby}` - the lobby settings were updated\n  - `{:host_changed, lobby_id, new_host_id}` - the host changed (e.g., after host leaves)","ref":"GameServer.Lobbies.html#module-pubsub-events"},{"type":"function","title":"GameServer.Lobbies.can_edit_lobby?/2","doc":"Check if a user can edit a lobby (is host or lobby is hostless).","ref":"GameServer.Lobbies.html#can_edit_lobby?/2"},{"type":"function","title":"GameServer.Lobbies.can_view_lobby?/2","doc":"Check if a user can view a lobby's details.\nUsers can view any lobby they can see in the list.","ref":"GameServer.Lobbies.html#can_view_lobby?/2"},{"type":"function","title":"GameServer.Lobbies.change_lobby/2","doc":"","ref":"GameServer.Lobbies.html#change_lobby/2"},{"type":"function","title":"GameServer.Lobbies.count_hidden_lobbies/0","doc":"Returns the count of hidden lobbies.","ref":"GameServer.Lobbies.html#count_hidden_lobbies/0"},{"type":"function","title":"GameServer.Lobbies.count_hostless_lobbies/0","doc":"Returns the count of hostless lobbies.","ref":"GameServer.Lobbies.html#count_hostless_lobbies/0"},{"type":"function","title":"GameServer.Lobbies.count_list_all_lobbies/1","doc":"Count ALL lobbies matching filters. For admin pagination.","ref":"GameServer.Lobbies.html#count_list_all_lobbies/1"},{"type":"function","title":"GameServer.Lobbies.count_list_lobbies/1","doc":"Count lobbies matching filters (excludes hidden ones unless admin list used). If metadata filters are supplied, they will be applied after fetching.","ref":"GameServer.Lobbies.html#count_list_lobbies/1"},{"type":"function","title":"GameServer.Lobbies.count_locked_lobbies/0","doc":"Returns the count of locked lobbies.","ref":"GameServer.Lobbies.html#count_locked_lobbies/0"},{"type":"function","title":"GameServer.Lobbies.count_passworded_lobbies/0","doc":"Returns the count of lobbies with passwords.","ref":"GameServer.Lobbies.html#count_passworded_lobbies/0"},{"type":"function","title":"GameServer.Lobbies.create_lobby/1","doc":"Creates a new lobby.","ref":"GameServer.Lobbies.html#create_lobby/1"},{"type":"function","title":"Attributes - GameServer.Lobbies.create_lobby/1","doc":"See `t:GameServer.Types.lobby_create_attrs/0` for available fields.","ref":"GameServer.Lobbies.html#create_lobby/1-attributes"},{"type":"function","title":"GameServer.Lobbies.create_membership/1","doc":"","ref":"GameServer.Lobbies.html#create_membership/1"},{"type":"function","title":"GameServer.Lobbies.delete_lobby/1","doc":"","ref":"GameServer.Lobbies.html#delete_lobby/1"},{"type":"function","title":"GameServer.Lobbies.delete_membership/1","doc":"","ref":"GameServer.Lobbies.html#delete_membership/1"},{"type":"function","title":"GameServer.Lobbies.get_lobby/1","doc":"","ref":"GameServer.Lobbies.html#get_lobby/1"},{"type":"function","title":"GameServer.Lobbies.get_lobby!/1","doc":"","ref":"GameServer.Lobbies.html#get_lobby!/1"},{"type":"function","title":"GameServer.Lobbies.get_lobby_members/1","doc":"Gets all users currently in a lobby.\n\nReturns a list of User structs.","ref":"GameServer.Lobbies.html#get_lobby_members/1"},{"type":"function","title":"Examples - GameServer.Lobbies.get_lobby_members/1","doc":"iex> get_lobby_members(lobby)\n    [%User{}, %User{}]\n\n    iex> get_lobby_members(lobby_id)\n    [%User{}]","ref":"GameServer.Lobbies.html#get_lobby_members/1-examples"},{"type":"function","title":"GameServer.Lobbies.join_lobby/3","doc":"","ref":"GameServer.Lobbies.html#join_lobby/3"},{"type":"function","title":"GameServer.Lobbies.kick_user/3","doc":"Kick a user from a lobby. Only the host can kick users.\nReturns {:ok, user} on success, {:error, reason} on failure.","ref":"GameServer.Lobbies.html#kick_user/3"},{"type":"function","title":"GameServer.Lobbies.leave_lobby/1","doc":"","ref":"GameServer.Lobbies.html#leave_lobby/1"},{"type":"function","title":"GameServer.Lobbies.list_all_lobbies/2","doc":"List ALL lobbies including hidden ones. For admin use only.\nAccepts filters: %{\n  title: string,\n  is_hidden: boolean/string,\n  is_locked: boolean/string,\n  has_password: boolean/string,\n  min_users: integer (filter by max_users >= val),\n  max_users: integer (filter by max_users <= val)\n}","ref":"GameServer.Lobbies.html#list_all_lobbies/2"},{"type":"function","title":"GameServer.Lobbies.list_lobbies/2","doc":"List lobbies. Accepts optional search filters.","ref":"GameServer.Lobbies.html#list_lobbies/2"},{"type":"function","title":"Filters - GameServer.Lobbies.list_lobbies/2","doc":"* `:title` - Filter by title (partial match)\n  * `:is_passworded` - boolean or string 'true'/'false' (omit for any)\n  * `:is_locked` - boolean or string 'true'/'false' (omit for any)\n  * `:min_users` - Filter lobbies with max_users >= value\n  * `:max_users` - Filter lobbies with max_users <= value\n  * `:metadata_key` - Filter by metadata key\n  * `:metadata_value` - Filter by metadata value (requires metadata_key)","ref":"GameServer.Lobbies.html#list_lobbies/2-filters"},{"type":"function","title":"Options - GameServer.Lobbies.list_lobbies/2","doc":"See `t:GameServer.Types.lobby_list_opts/0` for available options.","ref":"GameServer.Lobbies.html#list_lobbies/2-options"},{"type":"function","title":"GameServer.Lobbies.list_lobbies_for_user/3","doc":"List lobbies visible to a specific user.\nIncludes the user's own lobby even if it's hidden.","ref":"GameServer.Lobbies.html#list_lobbies_for_user/3"},{"type":"function","title":"GameServer.Lobbies.list_memberships_for_lobby/1","doc":"","ref":"GameServer.Lobbies.html#list_memberships_for_lobby/1"},{"type":"function","title":"GameServer.Lobbies.quick_join/4","doc":"Attempt to find an open lobby matching the given criteria and join it, or\ncreate a new lobby if none matches.\n\nSignature: quick_join(user, title \\ nil, max_users \\ nil, metadata \\ %{})\n\n- If the user is already in a lobby returns {:error, :already_in_lobby}\n- On successful join or creation returns {:ok, lobby}\n- Propagates errors from join or create flows","ref":"GameServer.Lobbies.html#quick_join/4"},{"type":"function","title":"GameServer.Lobbies.subscribe_lobbies/0","doc":"Subscribe to global lobby events (lobby created, updated, deleted).","ref":"GameServer.Lobbies.html#subscribe_lobbies/0"},{"type":"function","title":"GameServer.Lobbies.subscribe_lobby/1","doc":"Subscribe to a specific lobby's events (membership changes, updates).","ref":"GameServer.Lobbies.html#subscribe_lobby/1"},{"type":"function","title":"GameServer.Lobbies.unsubscribe_lobby/1","doc":"Unsubscribe from a specific lobby's events.","ref":"GameServer.Lobbies.html#unsubscribe_lobby/1"},{"type":"function","title":"GameServer.Lobbies.update_lobby/2","doc":"Updates an existing lobby.","ref":"GameServer.Lobbies.html#update_lobby/2"},{"type":"function","title":"Attributes - GameServer.Lobbies.update_lobby/2","doc":"See `t:GameServer.Types.lobby_update_attrs/0` for available fields.","ref":"GameServer.Lobbies.html#update_lobby/2-attributes"},{"type":"function","title":"GameServer.Lobbies.update_lobby_by_host/3","doc":"","ref":"GameServer.Lobbies.html#update_lobby_by_host/3"},{"type":"module","title":"GameServer.Accounts.User","doc":"The User schema and associated changeset functions used across the\napplication (registration, OAuth, and admin changes).\n\nThis module keeps Ecto changesets for common user interactions and\nvalidations so other domains can reuse them safely.","ref":"GameServer.Accounts.User.html"},{"type":"type","title":"GameServer.Accounts.User.t/0","doc":"The public user struct used across the application.","ref":"GameServer.Accounts.User.html#t:t/0"},{"type":"function","title":"GameServer.Accounts.User.admin_changeset/2","doc":"A user changeset for admin updates.","ref":"GameServer.Accounts.User.html#admin_changeset/2"},{"type":"function","title":"GameServer.Accounts.User.apple_oauth_changeset/2","doc":"A user changeset for Apple OAuth registration.\n\nIt accepts email and Apple ID.","ref":"GameServer.Accounts.User.html#apple_oauth_changeset/2"},{"type":"function","title":"GameServer.Accounts.User.attach_device_changeset/2","doc":"Changeset used when a device_id is present (linking device_id to user).\nEnsures device_id is stored on user record and enforces uniqueness by DB\nconstraint.","ref":"GameServer.Accounts.User.html#attach_device_changeset/2"},{"type":"function","title":"GameServer.Accounts.User.confirm_changeset/1","doc":"Confirms the account by setting `confirmed_at`.","ref":"GameServer.Accounts.User.html#confirm_changeset/1"},{"type":"function","title":"GameServer.Accounts.User.device_changeset/2","doc":"A user changeset used for device-based logins where there is no email.\n\nDevice users are created with optional display_name and metadata and are\nimmediately confirmed so the SDK can receive tokens without email confirmation.","ref":"GameServer.Accounts.User.html#device_changeset/2"},{"type":"function","title":"GameServer.Accounts.User.discord_oauth_changeset/2","doc":"A user changeset for Discord OAuth registration.\n\nIt accepts email and Discord fields.","ref":"GameServer.Accounts.User.html#discord_oauth_changeset/2"},{"type":"function","title":"GameServer.Accounts.User.display_name_changeset/2","doc":"A simple changeset for updating a user's display name.","ref":"GameServer.Accounts.User.html#display_name_changeset/2"},{"type":"function","title":"GameServer.Accounts.User.email_changeset/3","doc":"A user changeset for registering or changing the email.\n\nIt requires the email to change otherwise an error is added.","ref":"GameServer.Accounts.User.html#email_changeset/3"},{"type":"function","title":"Options - GameServer.Accounts.User.email_changeset/3","doc":"* `:validate_unique` - Set to false if you don't want to validate the\n    uniqueness of the email, useful when displaying live validations.\n    Defaults to `true`.","ref":"GameServer.Accounts.User.html#email_changeset/3-options"},{"type":"function","title":"GameServer.Accounts.User.facebook_oauth_changeset/2","doc":"A user changeset for Facebook OAuth registration.\n\nIt accepts email and Facebook ID.","ref":"GameServer.Accounts.User.html#facebook_oauth_changeset/2"},{"type":"function","title":"GameServer.Accounts.User.google_oauth_changeset/2","doc":"A user changeset for Google OAuth registration.\n\nIt accepts email and Google ID.","ref":"GameServer.Accounts.User.html#google_oauth_changeset/2"},{"type":"function","title":"GameServer.Accounts.User.password_changeset/3","doc":"A user changeset for changing the password.\n\nIt is important to validate the length of the password, as long passwords may\nbe very expensive to hash for certain algorithms.","ref":"GameServer.Accounts.User.html#password_changeset/3"},{"type":"function","title":"Options - GameServer.Accounts.User.password_changeset/3","doc":"* `:hash_password` - Hashes the password so it can be stored securely\n    in the database and ensures the password field is cleared to prevent\n    leaks in the logs. If password hashing is not needed and clearing the\n    password field is not desired (like when using this changeset for\n    validations on a LiveView form), this option can be set to `false`.\n    Defaults to `true`.","ref":"GameServer.Accounts.User.html#password_changeset/3-options"},{"type":"function","title":"GameServer.Accounts.User.registration_changeset/3","doc":"A user changeset for registering a new user.","ref":"GameServer.Accounts.User.html#registration_changeset/3"},{"type":"function","title":"GameServer.Accounts.User.steam_oauth_changeset/2","doc":"A user changeset for Steam OpenID registration.\n\nExpects steam_id and optional profile fields.","ref":"GameServer.Accounts.User.html#steam_oauth_changeset/2"},{"type":"function","title":"GameServer.Accounts.User.valid_password?/2","doc":"Verifies the password.\n\nIf there is no user or the user doesn't have a password, we call\n`Bcrypt.no_user_verify/0` to avoid timing attacks.","ref":"GameServer.Accounts.User.html#valid_password?/2"},{"type":"module","title":"GameServer.Friends.Friendship","doc":"Ecto schema representing a friendship/request between two users.\n\nThe friendship object stores the requester and the target user together with\na status field which can be \"pending\", \"accepted\", \"rejected\" or\n\"blocked\".","ref":"GameServer.Friends.Friendship.html"},{"type":"type","title":"GameServer.Friends.Friendship.t/0","doc":"A friendship/request record between two users.","ref":"GameServer.Friends.Friendship.html#t:t/0"},{"type":"module","title":"GameServer.Leaderboards.Leaderboard","doc":"Ecto schema for the `leaderboards` table.\n\nA leaderboard is a self-contained scoreboard that can be permanent or time-limited.\nEach leaderboard has its own settings for sort order and score operator.","ref":"GameServer.Leaderboards.Leaderboard.html"},{"type":"module","title":"Slug - GameServer.Leaderboards.Leaderboard","doc":"The `slug` is a human-readable identifier (e.g., \"weekly_kills\") that can be reused\nacross multiple leaderboard instances (seasons). Use the slug to always target the\ncurrently active leaderboard, or use the integer `id` for a specific instance.","ref":"GameServer.Leaderboards.Leaderboard.html#module-slug"},{"type":"module","title":"Sort Order - GameServer.Leaderboards.Leaderboard","doc":"- `:desc`  Higher scores rank first (default)\n- `:asc`  Lower scores rank first (e.g., fastest time)","ref":"GameServer.Leaderboards.Leaderboard.html#module-sort-order"},{"type":"module","title":"Operators - GameServer.Leaderboards.Leaderboard","doc":"- `:set`  Always replace with new score\n- `:best`  Only update if new score is better (default)\n- `:incr`  Add to existing score\n- `:decr`  Subtract from existing score","ref":"GameServer.Leaderboards.Leaderboard.html#module-operators"},{"type":"type","title":"GameServer.Leaderboards.Leaderboard.operator/0","doc":"","ref":"GameServer.Leaderboards.Leaderboard.html#t:operator/0"},{"type":"type","title":"GameServer.Leaderboards.Leaderboard.sort_order/0","doc":"","ref":"GameServer.Leaderboards.Leaderboard.html#t:sort_order/0"},{"type":"type","title":"GameServer.Leaderboards.Leaderboard.t/0","doc":"","ref":"GameServer.Leaderboards.Leaderboard.html#t:t/0"},{"type":"function","title":"GameServer.Leaderboards.Leaderboard.active?/1","doc":"Returns true if the leaderboard is currently active (not ended).","ref":"GameServer.Leaderboards.Leaderboard.html#active?/1"},{"type":"function","title":"GameServer.Leaderboards.Leaderboard.changeset/2","doc":"Changeset for creating a new leaderboard.","ref":"GameServer.Leaderboards.Leaderboard.html#changeset/2"},{"type":"function","title":"GameServer.Leaderboards.Leaderboard.ended?/1","doc":"Returns true if the leaderboard has ended.","ref":"GameServer.Leaderboards.Leaderboard.html#ended?/1"},{"type":"function","title":"GameServer.Leaderboards.Leaderboard.update_changeset/2","doc":"Changeset for updating an existing leaderboard.\nDoes not allow changing slug, sort_order, or operator after creation.","ref":"GameServer.Leaderboards.Leaderboard.html#update_changeset/2"},{"type":"module","title":"GameServer.Leaderboards.Record","doc":"Ecto schema for the `leaderboard_records` table.\n\nA record represents a single user's score entry in a leaderboard.\nEach user can have at most one record per leaderboard.","ref":"GameServer.Leaderboards.Record.html"},{"type":"type","title":"GameServer.Leaderboards.Record.t/0","doc":"","ref":"GameServer.Leaderboards.Record.html#t:t/0"},{"type":"function","title":"GameServer.Leaderboards.Record.changeset/2","doc":"Changeset for creating a new record.","ref":"GameServer.Leaderboards.Record.html#changeset/2"},{"type":"function","title":"GameServer.Leaderboards.Record.update_changeset/2","doc":"Changeset for updating an existing record's score.","ref":"GameServer.Leaderboards.Record.html#update_changeset/2"},{"type":"module","title":"GameServer.Lobbies.Lobby","doc":"Ecto schema for the `lobbies` table and changeset helpers.\n\nA lobby represents a game room with basic settings (title, host, capacity,\nvisibility, lock/password and arbitrary metadata).","ref":"GameServer.Lobbies.Lobby.html"},{"type":"type","title":"GameServer.Lobbies.Lobby.t/0","doc":"","ref":"GameServer.Lobbies.Lobby.html#t:t/0"},{"type":"function","title":"GameServer.Lobbies.Lobby.changeset/2","doc":"","ref":"GameServer.Lobbies.Lobby.html#changeset/2"},{"type":"extras","title":"README","doc":"![gamend banner](https://github.com/appsinacup/game_server/blob/main/priv/static/images/banner.png?raw=true)\n\n-----\n\n**Open source _game server_ with _authentication, users, lobbies, server scripting and an admin portal_.**\n\nGame + Backend = Gamend\n\n-----\n\n[Discord](https://discord.com/invite/56dMud8HYn) | [Elixir Docs](https://appsinacup.github.io/game_server/) | [API Docs](https://gamend.appsinacup.com/api/docs) | [Guides](https://gamend.appsinacup.com/docs/setup) | [Starter Template](https://github.com/appsinacup/gamend_starter) | [Architecture](./ARCHITECTURE.md)\n\nTo start your server:\n\n* Run `mix setup` to install and setup dependencies.\n\nNow you can visit [`localhost:4000`](http://localhost:4000) from your browser.","ref":"readme.html"},{"type":"extras","title":"Authentication - README","doc":"This application supports two authentication methods:","ref":"readme.html#authentication"},{"type":"extras","title":"Browser Authentication (Session-based) - README","doc":"Traditional session-based authentication for browser flows:\n- Email/password registration and login\n- Discord OAuth\n- Apple Sing In\n- Google OAuth\n- Steam OpenID\n- Facebook OAuth\n- Session tokens stored in database\n- Managed via cookies and Phoenix sessions","ref":"readme.html#browser-authentication-session-based"},{"type":"extras","title":"API Authentication (JWT) - README","doc":"Modern JWT authentication using access + refresh tokens (industry standard):\n\n**Token Types:**\n- **Access tokens**: Short-lived (15 minutes), used for API requests\n- **Refresh tokens**: Long-lived (30 days), used to obtain new access tokens","ref":"readme.html#api-authentication-jwt"},{"type":"extras","title":"Users - README","doc":"User management:\n\n- Multiple sign-in flows supported: Email/password, device tokens (SDK), and OAuth (Discord / Google / Facebook / Apple).\n- Per-user profile metadata as JSON\n- Account lifecycle: registration, login, password reset, and account deletion endpoints.","ref":"readme.html#users"},{"type":"extras","title":"Friends - README","doc":"Social features:\n\n- Friend requests with accept / reject / block flows.","ref":"readme.html#friends"},{"type":"extras","title":"Lobbies - README","doc":"Matchmaking and lobbies:\n\n- Host-managed behavior, max users, hidden/locked states, and password protection.\n- Public APIs are provided for listing, creating, joining, leaving, updating and kicking.","ref":"readme.html#lobbies"},{"type":"extras","title":"Server scripting (Elixir) - README","doc":"Extendable server behavior:\n\n- Hooks on server events (eg. on_user_login, on_lobby_created)","ref":"readme.html#server-scripting-elixir"},{"type":"extras","title":"Client SDK - README","doc":"- [Javascript SDK](https://www.npmjs.com/package/@ughuuu/game_server)\n- [Godot SDK](https://godotengine.org/asset-library/asset/4510)","ref":"readme.html#client-sdk"},{"type":"extras","title":"Elixir SDK - README","doc":"The `sdk/` folder contains stub modules that provide IDE autocomplete and documentation for custom hook scripts. When building your own [Starter Template](https://github.com/appsinacup/gamend_starter), add the SDK as a dependency:\n\n```elixir\n# mix.exs\ndefp deps do\n  [\n    {:game_server_sdk, github: \"appsinacup/game_server\", sparse: \"sdk\"}\n  ]\nend\n```\n\nExample hook with autocomplete:\n\n```elixir\ndefmodule MyApp.Hooks do\n  use GameServer.Hooks\n\n  @impl true\n  def after_user_login(user) do\n    # IDE autocomplete works for user fields and Accounts functions\n    GameServer.Accounts.update_user(user, %{\n      metadata: Map.put(user.metadata, \"last_login\", DateTime.utc_now())\n    })\n    :ok\n  end\nend\n```\n\nTo regenerate SDK stubs from the main project:\n\n```sh\nmix gen.sdk\n```","ref":"readme.html#elixir-sdk"},{"type":"extras","title":"How to deploy Starter Template - README","doc":"1. Fork this repo (or create a Dockerfile like this):\n\n```sh\nFROM ghcr.io/appsinacup/game_server:latest\n\nWORKDIR /app\n\nCOPY modules/ ./modules/\n```\n\n2. Go to fly.io and deploy (select the forked repo).\n3. Set secrets all values in `.env.example`. Run locally `fly secrets sync` and `fly secrets deploy` (in case secrets don't deploy/update).\n4. Configure all things from [Guides](https://gamend.appsinacup.com/docs/setup) page.\n5. Monthly cost (without Postgres) will be about 5$.","ref":"readme.html#how-to-deploy-starter-template"},{"type":"extras","title":"Git hooks - README","doc":"To install precommit hooks, run:\n\n```sh\n\tbin/setup-git-hooks\n```\n\nTo skip, run:\n\n```sh\n\tSKIP_PRECOMMIT=1 git commit\n```","ref":"readme.html#git-hooks"}],"producer":{"name":"ex_doc","version":"0.39.3"},"content_type":"text/markdown","proglang":"elixir"}