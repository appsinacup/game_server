<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.40.1">
    <meta name="project" content="GameServer v1.0.613">


    <title>GameServer.Accounts.User â€” GameServer v1.0.613</title>

    <link rel="stylesheet" href="dist/html-elixir-YJO4MOOW.css" />

    <script defer src="dist/sidebar_items-47DFDD47.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-YU4BZFVS.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="api-reference.html" class="sidebar-projectName" translate="no">
GameServer
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.613
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras="Pages"></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of GameServer</span>
            <div class="search-input-wrapper">
              <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
              <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
                <i class="ri-close-line ri-lg" title="Cancel search"></i>
              </button>
            </div>
          </label>
        </form>
        <div class="autocomplete">
        </div>
        <div class="engine-selector" data-multiple="false">
          <button type="button" class="engine-button" aria-label="Select search engine" aria-haspopup="true" aria-expanded="false">
            <i class="ri-search-2-line" aria-hidden="true"></i>
            <span class="engine-name">Default</span>
            <i class="ri-arrow-down-s-line" aria-hidden="true"></i>
          </button>
          <div class="engine-dropdown" hidden role="menu">

              <button type="button"
                      class="engine-option"
                      data-engine-url="search.html?q="
                      role="menuitemradio"
                      aria-checked="true">
                <span class="name">Default</span>
                <span class="help">In-browser search</span>
              </button>

          </div>
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">GameServer.<wbr>Accounts.<wbr>User</span> 
      <small class="app-vsn" translate="no">(GameServer v1.0.613)</small>

    </h1>

<a href="GameServer.Accounts.User.md" title="Copy Markdown (hold Ctrl/Cmd and click it to open as Markdown)" class="copy-markdown icon-action" rel="help">
  <i class="ri-markdown-line" aria-hidden="true"></i>
  <span class="sr-only">Copy Markdown</span>
</a>



  </div>


    <section id="moduledoc">
<p>The User schema and associated changeset functions used across the
application (registration, OAuth, and admin changes).</p><p>This module keeps Ecto changesets for common user interactions and
validations so other domains can reuse them safely.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h2 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h2>
<div class="summary-types summary">
  <h3>
    <a href="#types">Types</a>
  </h3>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:t/0" data-no-tooltip="" translate="no">t()</a>

      </div>

        <div class="summary-synopsis"><p>The public user struct used across the application.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h3>
    <a href="#functions">Functions</a>
  </h3>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#admin_changeset/2" data-no-tooltip="" translate="no">admin_changeset(user, attrs)</a>

      </div>

        <div class="summary-synopsis"><p>A user changeset for admin updates.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#apple_oauth_changeset/2" data-no-tooltip="" translate="no">apple_oauth_changeset(user, attrs)</a>

      </div>

        <div class="summary-synopsis"><p>A user changeset for Apple OAuth registration.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#attach_device_changeset/2" data-no-tooltip="" translate="no">attach_device_changeset(user, attrs)</a>

      </div>

        <div class="summary-synopsis"><p>Changeset used when a device_id is present (linking device_id to user).
Ensures device_id is stored on user record and enforces uniqueness by DB
constraint.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#confirm_changeset/1" data-no-tooltip="" translate="no">confirm_changeset(user)</a>

      </div>

        <div class="summary-synopsis"><p>Confirms the account by setting <code class="inline">confirmed_at</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#device_changeset/2" data-no-tooltip="" translate="no">device_changeset(user, attrs)</a>

      </div>

        <div class="summary-synopsis"><p>A user changeset used for device-based logins where there is no email.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#discord_oauth_changeset/2" data-no-tooltip="" translate="no">discord_oauth_changeset(user, attrs)</a>

      </div>

        <div class="summary-synopsis"><p>A user changeset for Discord OAuth registration.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#display_name_changeset/2" data-no-tooltip="" translate="no">display_name_changeset(user, attrs)</a>

      </div>

        <div class="summary-synopsis"><p>A simple changeset for updating a user's display name.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#email_changeset/3" data-no-tooltip="" translate="no">email_changeset(user, attrs, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>A user changeset for registering or changing the email.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#facebook_oauth_changeset/2" data-no-tooltip="" translate="no">facebook_oauth_changeset(user, attrs)</a>

      </div>

        <div class="summary-synopsis"><p>A user changeset for Facebook OAuth registration.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#google_oauth_changeset/2" data-no-tooltip="" translate="no">google_oauth_changeset(user, attrs)</a>

      </div>

        <div class="summary-synopsis"><p>A user changeset for Google OAuth registration.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#last_seen_at_or_fallback/1" data-no-tooltip="" translate="no">last_seen_at_or_fallback(user)</a>

      </div>

        <div class="summary-synopsis"><p>Returns <code class="inline">last_seen_at</code> when present, otherwise a stable fallback timestamp.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#password_changeset/3" data-no-tooltip="" translate="no">password_changeset(user, attrs, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>A user changeset for changing the password.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#registration_changeset/3" data-no-tooltip="" translate="no">registration_changeset(user, attrs, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>A user changeset for registering a new user.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#steam_oauth_changeset/2" data-no-tooltip="" translate="no">steam_oauth_changeset(user, attrs)</a>

      </div>

        <div class="summary-synopsis"><p>A user changeset for Steam OpenID registration.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#valid_password?/2" data-no-tooltip="" translate="no">valid_password?(arg1, password)</a>

      </div>

        <div class="summary-synopsis"><p>Verifies the password.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h2 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h2>

    <div class="types-list">
<section class="detail" id="t:t/0">

  <div class="detail-header">
    <a href="#t:t/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">t()</h1>


    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> t() :: %GameServer.Accounts.User{
  __meta__: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  apple_id: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  authenticated_at: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  confirmed_at: <a href="https://hexdocs.pm/elixir/DateTime.html#t:t/0">DateTime.t</a>() | nil,
  device_id: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  discord_id: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  display_name: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil,
  email: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil,
  facebook_id: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  google_id: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  hashed_password: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil,
  id: <a href="https://hexdocs.pm/ecto/3.13.5/Ecto.UUID.html#t:t/0">Ecto.UUID.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>() | nil,
  inserted_at: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  is_admin: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  is_online: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>(),
  last_seen_at: <a href="https://hexdocs.pm/elixir/DateTime.html#t:t/0">DateTime.t</a>() | nil,
  lobby: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  lobby_id: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>() | nil,
  metadata: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(),
  party: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  party_id: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>() | nil,
  password: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  profile_url: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  steam_id: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  updated_at: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()
}</pre>

      </div>

<p>The public user struct used across the application.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h2 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h2>

    <div class="functions-list">
<section class="detail" id="admin_changeset/2">

  <div class="detail-header">
    <a href="#admin_changeset/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">admin_changeset(user, attrs)</h1>


    </div>
  </div>

  <section class="docstring">

<p>A user changeset for admin updates.</p>
  </section>
</section>
<section class="detail" id="apple_oauth_changeset/2">

  <div class="detail-header">
    <a href="#apple_oauth_changeset/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">apple_oauth_changeset(user, attrs)</h1>


    </div>
  </div>

  <section class="docstring">

<p>A user changeset for Apple OAuth registration.</p><p>It accepts email and Apple ID.</p>
  </section>
</section>
<section class="detail" id="attach_device_changeset/2">

  <div class="detail-header">
    <a href="#attach_device_changeset/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">attach_device_changeset(user, attrs)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Changeset used when a device_id is present (linking device_id to user).
Ensures device_id is stored on user record and enforces uniqueness by DB
constraint.</p>
  </section>
</section>
<section class="detail" id="confirm_changeset/1">

  <div class="detail-header">
    <a href="#confirm_changeset/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">confirm_changeset(user)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Confirms the account by setting <code class="inline">confirmed_at</code>.</p>
  </section>
</section>
<section class="detail" id="device_changeset/2">

  <div class="detail-header">
    <a href="#device_changeset/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">device_changeset(user, attrs)</h1>


    </div>
  </div>

  <section class="docstring">

<p>A user changeset used for device-based logins where there is no email.</p><p>Device users are created with optional display_name and metadata and are
immediately confirmed so the SDK can receive tokens without email confirmation.</p>
  </section>
</section>
<section class="detail" id="discord_oauth_changeset/2">

  <div class="detail-header">
    <a href="#discord_oauth_changeset/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">discord_oauth_changeset(user, attrs)</h1>


    </div>
  </div>

  <section class="docstring">

<p>A user changeset for Discord OAuth registration.</p><p>It accepts email and Discord fields.</p>
  </section>
</section>
<section class="detail" id="display_name_changeset/2">

  <div class="detail-header">
    <a href="#display_name_changeset/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">display_name_changeset(user, attrs)</h1>


    </div>
  </div>

  <section class="docstring">

<p>A simple changeset for updating a user's display name.</p><p>Allows empty string so users can set an empty display name if desired.</p>
  </section>
</section>
<section class="detail" id="email_changeset/3">

    <span id="email_changeset/2"></span>

  <div class="detail-header">
    <a href="#email_changeset/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">email_changeset(user, attrs, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>A user changeset for registering or changing the email.</p><p>It requires the email to change otherwise an error is added.</p><h2 id="email_changeset/3-options" class="section-heading"><a href="#email_changeset/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:validate_unique</code> - Set to false if you don't want to validate the
uniqueness of the email, useful when displaying live validations.
Defaults to <code class="inline">true</code>.</li></ul>
  </section>
</section>
<section class="detail" id="facebook_oauth_changeset/2">

  <div class="detail-header">
    <a href="#facebook_oauth_changeset/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">facebook_oauth_changeset(user, attrs)</h1>


    </div>
  </div>

  <section class="docstring">

<p>A user changeset for Facebook OAuth registration.</p><p>It accepts email and Facebook ID.</p>
  </section>
</section>
<section class="detail" id="google_oauth_changeset/2">

  <div class="detail-header">
    <a href="#google_oauth_changeset/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">google_oauth_changeset(user, attrs)</h1>


    </div>
  </div>

  <section class="docstring">

<p>A user changeset for Google OAuth registration.</p><p>It accepts email and Google ID.</p>
  </section>
</section>
<section class="detail" id="last_seen_at_or_fallback/1">

  <div class="detail-header">
    <a href="#last_seen_at_or_fallback/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">last_seen_at_or_fallback(user)</h1>


    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> last_seen_at_or_fallback(<a href="#t:t/0">t</a>()) :: <a href="https://hexdocs.pm/elixir/DateTime.html#t:t/0">DateTime.t</a>()</pre>

      </div>

<p>Returns <code class="inline">last_seen_at</code> when present, otherwise a stable fallback timestamp.</p>
  </section>
</section>
<section class="detail" id="password_changeset/3">

    <span id="password_changeset/2"></span>

  <div class="detail-header">
    <a href="#password_changeset/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">password_changeset(user, attrs, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>A user changeset for changing the password.</p><p>It is important to validate the length of the password, as long passwords may
be very expensive to hash for certain algorithms.</p><h2 id="password_changeset/3-options" class="section-heading"><a href="#password_changeset/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:hash_password</code> - Hashes the password so it can be stored securely
in the database and ensures the password field is cleared to prevent
leaks in the logs. If password hashing is not needed and clearing the
password field is not desired (like when using this changeset for
validations on a LiveView form), this option can be set to <code class="inline">false</code>.
Defaults to <code class="inline">true</code>.</li></ul>
  </section>
</section>
<section class="detail" id="registration_changeset/3">

    <span id="registration_changeset/2"></span>

  <div class="detail-header">
    <a href="#registration_changeset/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">registration_changeset(user, attrs, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>A user changeset for registering a new user.</p>
  </section>
</section>
<section class="detail" id="steam_oauth_changeset/2">

  <div class="detail-header">
    <a href="#steam_oauth_changeset/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">steam_oauth_changeset(user, attrs)</h1>


    </div>
  </div>

  <section class="docstring">

<p>A user changeset for Steam OpenID registration.</p><p>Expects steam_id and optional profile fields.</p>
  </section>
</section>
<section class="detail" id="valid_password?/2">

  <div class="detail-header">
    <a href="#valid_password?/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">valid_password?(arg1, password)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Verifies the password.</p><p>If there is no user or the user doesn't have a password, we call
<a href="https://hexdocs.pm/bcrypt_elixir/3.3.2/Bcrypt.html#no_user_verify/0"><code class="inline">Bcrypt.no_user_verify/0</code></a> to avoid timing attacks.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">

        <p>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Go to package docs">
              Go to package docs
            </button>

              <a href="llms.txt" target="_blank">
                View llms.txt
              </a>


              <a href="GameServer.epub">
                Download ePub version
              </a>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.40.1) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>


    </footer>
  </div>
</main>
</div>

  </body>
</html>
